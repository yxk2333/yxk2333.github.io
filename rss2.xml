<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>evilcos的博客</title>
    <link>lelia.club/</link>
    
    <image>
      <url>lelia.club/icon.png</url>
      <title>evilcos的博客</title>
      <link>lelia.club/</link>
    </image>
    
    <atom:link href="/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description></description>
    <pubDate>Sat, 05 Sep 2020 10:00:07 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>git bug</title>
      <link>lelia.club/2020/09/05/git-bug/</link>
      <guid>lelia.club/2020/09/05/git-bug/</guid>
      <pubDate>Sat, 05 Sep 2020 09:59:41 GMT</pubDate>
      <description>
      
      </description>
      
      
      <comments>lelia.club/2020/09/05/git-bug/#disqus_thread</comments>
    </item>
    
    <item>
      <title>京东定时签到-GitHub 实现</title>
      <link>lelia.club/2020/08/30/jd-bot/</link>
      <guid>lelia.club/2020/08/30/jd-bot/</guid>
      <pubDate>Sun, 30 Aug 2020 01:25:57 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;本教程只是针对 &lt;a href=&quot;https://github.com/NobyDa/Script&quot;&gt;NobyDa&lt;/a&gt;的签到脚本和
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本教程只是针对 <a href="https://github.com/NobyDa/Script">NobyDa</a>的签到脚本和 GitHub 的 Actions 来做一个托管的签到。以下有部分内容，比较偏向小白，明白的原理的可直接自己部署。</p><p>大体思路：</p><ol><li>自动下载 NobyDa 大佬的最新脚本</li><li>修改脚本中的参数值</li><li>基于 GitHub Actions 自动执行脚本</li></ol><h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><ol><li>GitHub 账户</li><li>京东账户</li><li>计算机基础知识</li><li>Server 酱[可选，主要用来推送签到结果]</li></ol><h2 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h2><p>通过此教程，你将每天凌晨<strong>定时签到</strong>，<strong>无需服务器</strong>，也不需要很多的开发，只需要简单的部署即可。另外因为京东 cookie 的原因，如果失效了只需要更改 GitHub 中 secret 中的 JD_COOKIE 即可，可以算是非常的简捷方便。<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/Kf8GTc23ONQMdUY.jpg" alt="result.jpg"></p><h2 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h2><p><strong>你的 cookie 存储在 GitHub 的 secrets 中所以，本人还有其他人是看不到，也无法使用的。敬请放心。</strong></p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="GitHub-注册"><a href="#GitHub-注册" class="headerlink" title="GitHub 注册"></a>GitHub 注册</h3><ol><li>首先打开官网 <a href="https://github.com/">GitHub</a></li><li>注册页面填入信息<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/lgtS2ebALYcZvMn.jpg" alt="github.jpg"></li></ol><ul><li>Username: 你的用户名，GitHub 全网唯一，它会自动检测是否有注册，最好英文</li><li>Email：你自己的邮箱</li><li>Password：密码</li></ul><ol><li>输入上述信息后，点击 <code>Sign up for GitHub</code> 按钮，会给你发送一封确认邮件，确认即可。</li></ol><h3 id="Server-酱配置-【可选】"><a href="#Server-酱配置-【可选】" class="headerlink" title="Server 酱配置 【可选】"></a>Server 酱配置 【可选】</h3><p>「Server酱」，英文名「ServerChan」，是一款「程序员」和「服务器」之间的通信软件。</p><p>使用 Server酱 前提是已有了 GitHub 账号，登录获取到 key 值，并绑定微信即可。然后会把每日签到的消息给你推送到微信中。</p><ol><li>打开 server 酱的官网[<a href="http://sc.ftqq.com/3.version]">http://sc.ftqq.com/3.version]</a></li><li>点击右上角的 <code>登入</code> 链接<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/4XcNxlKsgVOBnh6.jpg" alt="server-1.jpg"></li><li>会跳入 GitHub 授权页，在该页面填入你在上方注册的 GitHub 账户即可<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/WfcTvAd7qeRSuXP.jpg" alt="server-2.jpg"></li><li>点击上方的 <code>微信推送</code> 链接， 然后点击页面中的 <code>开始绑定</code><br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/NBaJpgslYZA21xj.jpg" alt="server-3.jpg"></li><li>掏出手机，打开微信，扫描屏幕上的二维码，如果未关注，先关注，然后在绑定即可。<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/9UkgFEcBYSZWCxo.jpg" alt="server-4.jpg"></li><li>绑定后，点击上方的 <code>发送消息</code> 链接，就可以看到你自己的 key 值，保存下来，下面会用到。<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/L2GWN5qlnTtJsgb.jpg" alt="server-5.jpg"></li></ol><h3 id="获取京东-cookie"><a href="#获取京东-cookie" class="headerlink" title="获取京东 cookie"></a>获取京东 cookie</h3><p>描述，所有的操作都是基于京东的账户的 cookie 操作的，所以这一步很重要。大概率使用<strong>手机号验证码登录的</strong>京东的 cookie 有效期大概一个月(没有实际论证过，存疑)。</p><ol><li>电脑上打开 Chrome 浏览器，按 F12 打开开发者工具，并点击工具栏的左上角选择手机模式。<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/l9UxPry7qBzu8nH.png" alt="chrome-1.png"></li><li>然后选中一个设备<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/V23jrxL9RpdetAT.png" alt="chrome-2.png"></li><li>输入地址 <code>https://plogin.m.jd.com/login/login</code> 并打开网页，输入手机号验证码，点击登录。<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/eQHP6YESL7rqCGD.jpg" alt="chrome-3.jpg"></li><li>选择右侧工具栏中的 <code>console</code> 然后在下放输入 <code>copy(document.cookie)</code> 它会拷贝当前的 cookie， 然后在一个文本编辑器中或其他可编辑的窗口中复制出内容，并保存好，下方要用。<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/UwmiIvhaYzOspDd.jpg" alt="chrome-4.jpg"></li></ol><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><h3 id="Fork-代码"><a href="#Fork-代码" class="headerlink" title="Fork 代码"></a>Fork 代码</h3><p>相关的基础程序都已经写好，放在了，大家可以直接 fork 代码到自己的项目中。</p><ul><li><p>打开 <a href="https://github.com/">GitHub</a>，登录自己的 GitHub 账户。</p></li><li><p>浏览器访问</p></li></ul><p>  ruicky/jd_sign_bot</p><ul><li>点击 右上角的 Star 按钮。</li><li>点击 右上角的 Fork 按钮。</li></ul><p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/nxQ3jaXPqsY8uyB.jpg" alt="fork.jpg"></p><h3 id="GitHub-配置"><a href="#GitHub-配置" class="headerlink" title="GitHub 配置"></a>GitHub 配置</h3><ul><li><p>点击页面的 <code>Settings</code> 操作按钮<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/YGCr986DkuLqQMX.jpg" alt="settings.jpg"></p></li><li><p>点击左侧的 <code>Secrets</code> 选项卡<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/mlbeD5poOd4BtWf.jpg" alt="secrets.jpg"></p></li><li><p>点击页面右上角的 <code>New secret</code> 按钮<br><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/XqUfTevZOM6G5JQ.jpg" alt="new-secret.jpg"></p></li><li><p>填写 京东 cookie 的 secret 信息</p><p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/30/jiFMIUcVos68JYd.jpg" alt="add-secret.jpg"></p><ul><li>Name: JD_COOKIE</li><li>Value: 你自己的 京东 cookie 值</li><li>填写完成后 点击 <code>Add secret</code> 按钮</li></ul></li></ul><p>下面的内容会配置通知微信推送的 <code>Server 酱</code>，属于可选操作。</p><ul><li><p>再次点击页面右上角的 <code>New secret</code> 按钮<br><a href="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/new-secret.jpg"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/new-secret.jpg" alt="new-secret"></a></p></li><li><p>填写 server 酱 key 的 secret 信息[</p><p>可选</p><p>]</p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/add-secret-push.jpg" alt="add-secret-push"></p><ul><li>Name: PUSH_KEY</li><li>Value: 你自己的 server key 值</li><li>填写完成后 点击 <code>Add secret</code> 按钮</li></ul></li><li><p>启动</p></li></ul>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GitHub Actions</span><br></pre></td></tr></table></figure><ul><li>点击功能栏中的 <code>Actions</code><br><a href="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/actions.jpg"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/actions.jpg" alt="actions"></a></li><li>点击绿色按钮，启用 <code>Actions</code><br><a href="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/enable-actions.jpg"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/enable-actions.jpg" alt="enable-actions"></a></li></ul><h2 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h2><p>先说原理，目前的 <code>GitHub Actions</code> 配置的执行触发有 2 个：</p><ol><li><p>定时执行</p></li><li><p>推送更新代码执行</p><p>大家可以根据第二点的特性来进行测试。例如编辑 README.md 文档，增加个回车，然后提交，来进行触发。<br><a href="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/edit-file.jpg"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/edit-file.jpg" alt="edit-file"></a><br>然后查看 <code>Actions</code> 的日志看是否成功。</p><ul><li>成功的日志<br><a href="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/success-log.jpg"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/success-log.jpg" alt="success-log"></a></li><li>错误的日志<br><a href="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/faile-log.jpg"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/ruicky/ruicky.github.io/2020/06/05/jd-sign/faile-log.jpg" alt="faile-log"></a></li></ul></li></ol><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><p>Q: Actions 日志里面显示 Key 报错，怎么处理？<br>A: 那可能是你的 Cookie 的问题，查看是否粘贴错误，例如多粘其他参数什么的。（小技巧：可以把 key 复制出来在电脑的编辑器上看是否是 1 行）</p><p>Q：按照配置，没有看到 Actions 执行，也没收到提示？<br>A：首先查看你的 Actions 中是否启用。默认 Fork 的分支，是关闭的。然后在查看你的日志，看对应的错误是什么。再次看是否自己的代码跟我的最新的是否一致。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><strong>注意：</strong> 京东 <code>Cookie</code> 的有效期如果使用扫码登录的 1 天，使用手机验证码登录的 1 个月。建议使用手机验证码登录。<br>每过一个月 <code>Cookie</code> 会过期，所以要定时去记得更新你的 <code>Secrets</code> 中的 <code>JD_COOKIE</code>, 否则，程序不能正常运行。<br>整个流程比较简单，相关操作过程也已经写明，如果还有不明白的地方可在下方留言。如果给我的相关项目给个 <code>Star</code> 会更好哦~</p><h2 id="反馈"><a href="#反馈" class="headerlink" title="反馈"></a>反馈</h2><p>目前只有几个脚本兼容多账号，所有只放了几个在workflow里面，也还没写教程， 你可以参考这边的 <a href="https://ruicky.me/2020/06/05/jd-sign/">github action使用教程</a></p><p><strong>注意几个地方就行</strong></p><ul><li>第一：使用action的时候其中京东的ck,不要放到 jdCookie.js里面，这样别人能看到，不安全，要放到Secrets里面, 添加 JD_COOKIE的时候。 多账号的cookie， 使用<code>&amp;</code>隔开，比如 <code>cookie1&amp;cookie2&amp;cookie3</code></li><li>第二：server酱的推送通知服务, 是可选项, 如果需要 自行申请SCKEY,再填入Secrets里面(Name选项输入 <code>PUSH_KEY</code> ,Value选项输入申请的 SCKEY)</li><li>第三：cron时间是按国际标准时间来的， 和北京时间不同，里面写16点才表示北京时间0点，具体可参考下面两个链接写cron<br>还有github action 会有延迟现象，一般会延迟10分钟左右吧。比如设置16:00运行，其实要16:00才会执行脚本的。<br><a href="https://datetime360.com/cn/utc-beijing-time/">参考链接一</a> ， <a href="http://www.timebie.com/cn/universalbeijing.php">参考链接二</a></li><li>第四：上面 <a href="https://ruicky.me/2020/06/05/jd-sign/">github action使用教程</a> 获取ck的方法不对。继续参考我readme里面 <a href="https://shimo.im/docs/CTwhjpG6ydvC3qJJ/">浏览器获取京东cookie教程</a> 获取ck。<br>不过这里面获取的ck比较长，可以用下面的脚本，在Chrome浏览器按F12，console里面输入下面脚本按enter回车键，这样子整理出关键的ck已经在你的剪贴板上， 可直接粘贴</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var CV &#x3D; &#39;这里单引号里面放 https:&#x2F;&#x2F;shimo.im&#x2F;docs&#x2F;CTwhjpG6ydvC3qJJ&#x2F; 方法获取的 ck&#39;;</span><br><span class="line">var CookieValue &#x3D; CV.match(&#x2F;pt_key&#x3D;.+?;&#x2F;) + CV.match(&#x2F;pt_pin&#x3D;.+?;&#x2F;);</span><br><span class="line">copy(CookieValue);</span><br></pre></td></tr></table></figure><ul><li>第五，fork过后，acton没有看到运行，是因为.yml文件里面的cron时间未到，如需立马看到效果，请在相应的.yml文件(路径：scripts/.github/workflows/xxx.yml)里面，添加下面的设置</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">push:</span><br><span class="line">  branches: [ master ]</span><br></pre></td></tr></table></figure><p><a href="https://user-images.githubusercontent.com/21308593/91629405-778cca00-e9fb-11ea-9c1e-04fc17c236fa.png"><img src= "/img/loading.gif" data-lazy-src="https://user-images.githubusercontent.com/21308593/91629405-778cca00-e9fb-11ea-9c1e-04fc17c236fa.png" alt="image"></a></p><blockquote><p>另外农场和萌宠等助力脚本还没放到workflow里面， 因为涉及到助力， 还没做好多账号的兼容。</p></blockquote><blockquote><p>你如果单个账号，可fork过去后，自己新建农场等脚本的workflow。</p></blockquote>]]></content:encoded>
      
      <comments>lelia.club/2020/08/30/jd-bot/#disqus_thread</comments>
    </item>
    
    <item>
      <title>健康信息全自动打卡</title>
      <link>lelia.club/2020/08/28/jiankangxitong/</link>
      <guid>lelia.club/2020/08/28/jiankangxitong/</guid>
      <pubDate>Fri, 28 Aug 2020 09:30:42 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;p&gt;为什么会整健康信息自动提交，还得从一只蝙蝠说起。&lt;/p&gt;
&lt;p&gt;受2019-nCoV的影响，为了解每个人的健康情况，很多单位都要求员工每日上报自己的健康情况。这种行为出发点是好的，但在实际执行过中却显得极为形式主义。每天规定早07:30必须打卡上报；上报信息准确性有待考证；
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<p>为什么会整健康信息自动提交，还得从一只蝙蝠说起。</p><p>受2019-nCoV的影响，为了解每个人的健康情况，很多单位都要求员工每日上报自己的健康情况。这种行为出发点是好的，但在实际执行过中却显得极为形式主义。每天规定早07:30必须打卡上报；上报信息准确性有待考证；强制使用各种APP导致个人信息泄露（虽然说在互联网时代获取一个人的信息极为容易，但也顶不住这样白给）……面对这种情况，个人无力反抗，只能按部就班的使用Python上交。（手动提交是不可能手动提交的，全自动化提交不香嘛。）</p><h2 id="一、数据包分析"><a href="#一、数据包分析" class="headerlink" title="一、数据包分析"></a>一、数据包分析</h2><p>提交数据必然会向服务器发送信息，因此就需要抓取数据包。这里我采用的是Drony（安卓应用，用作HTTP代理）+ BurpSuite 。通过分析发现就是简单的POST提交一个带有json数据包。值得注意的是，安卓的WLAN自带的HTTP代理并不能发送全部的数据包到Burp，所以，最后选择了Drony内建VPN进行代理转发。（不想使用电脑的话可以考虑使用HttpCanary、Packet Capture等Android应用抓包）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">User-Agent:Dart&#x2F;2.7 (dart:io)</span><br><span class="line">    </span><br><span class="line">info &#x3D; &#123;</span><br><span class="line">    &quot;home&quot;:&quot;在家&quot;,</span><br><span class="line">    &quot;address&quot;:&quot;&quot;,</span><br><span class="line">    &quot;keepInHome&quot;:&quot;否&quot;,</span><br><span class="line">    &quot;keepInHomeDate&quot;:&quot;null&quot;,</span><br><span class="line">    &quot;contact&quot;:&quot;否&quot;,</span><br><span class="line">    &quot;health&quot;:&quot;否&quot;,</span><br><span class="line">    &quot;fever&quot;:&quot;否&quot;,</span><br><span class="line">    &quot;feverValue&quot;:&quot;&quot;,</span><br><span class="line">    &quot;cough&quot;:&quot;否&quot;,</span><br><span class="line">    &quot;diarrhea&quot;:&quot;否&quot;,</span><br><span class="line">    &quot;arriveHubei&quot;:&quot;无&quot;,</span><br><span class="line">    &quot;travel&quot;:&quot;无&quot;,</span><br><span class="line">    &quot;remark&quot;:&quot;无&quot;,</span><br><span class="line">    &quot;submitCount&quot;:1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二、Python脚本编写"><a href="#二、Python脚本编写" class="headerlink" title="二、Python脚本编写"></a>二、Python脚本编写</h2><h4 id="1-建立会话"><a href="#1-建立会话" class="headerlink" title="1. 建立会话"></a>1. 建立会话</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">session &#x3D; requests.session()</span><br></pre></td></tr></table></figure><h4 id="2-登录获取cookie"><a href="#2-登录获取cookie" class="headerlink" title="2.登录获取cookie"></a>2.登录获取cookie</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">login &#x3D; session.post(login_url, json &#x3D; user, headers &#x3D; headers)</span><br></pre></td></tr></table></figure><h4 id="3-提交数据"><a href="#3-提交数据" class="headerlink" title="3.提交数据"></a>3.提交数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">health &#x3D; session.post(health_url, json &#x3D; info, headers &#x3D; headers)</span><br></pre></td></tr></table></figure><h2 id="三、自动执行"><a href="#三、自动执行" class="headerlink" title="三、自动执行"></a>三、自动执行</h2><p>Linux系统使用corntab -e建立计划任务；Windows使用taskschd.msc建立计划任务。<br>但由于APP托管的服务器日常卡顿，且还会屏蔽ip，所以托管在服务器上并不是那么稳定，因此考虑托管在Android手机。托管在安卓需要2个应用，1个插件（Tasker, Termux; Termux:Tasker），且<strong>都不需要root</strong>。</p><p>(1)<strong>Termux</strong>——终端模拟器和Linux环境<br>Android基于Linux，这个软件就是在安卓上实现Linux环境。支持运行python, PHP, MySQL等。<br>0.0下载地址</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#Google Play Store</span><br><span class="line">https:&#x2F;&#x2F;play.google.com&#x2F;store&#x2F;apps&#x2F;details?id&#x3D;com.termux</span><br><span class="line">#F-Droid</span><br><span class="line">https:&#x2F;&#x2F;f-droid.org&#x2F;repository&#x2F;browse&#x2F;?fdid&#x3D;com.termux</span><br></pre></td></tr></table></figure><p>Termux使用起来与Linux Shell相似。pkg管理程序包（使用方法与apt、yum类似）。</p><p>0.1更换国内源(可选)<br>将原来的<a href="https://termux.org/packages/%E5%AE%98%E6%96%B9%E6%BA%90%E6%9B%BF%E6%8D%A2%E4%B8%BAhttp://mirrors.tuna.tsinghua.edu.cn/termux">https://termux.org/packages/官方源替换为http://mirrors.tuna.tsinghua.edu.cn/termux</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#vi $PREFIX&#x2F;etc&#x2F;apt&#x2F;sources.list</span><br><span class="line">#deb https:&#x2F;&#x2F;termux.org&#x2F;packages&#x2F; stable main</span><br><span class="line">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;termux stable main</span><br></pre></td></tr></table></figure><p>1.1安装python3</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install python</span><br></pre></td></tr></table></figure><p>1.2安装requests模块</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure><p>2.建立任务存放目录</p><p>完整路径/data/data/com.termux/files/home/.termux/tasker/<br>未root时程序仅能访问的目录，将所有脚本都放在这个目录下.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~&#x2F;.termux&#x2F;tasker</span><br></pre></td></tr></table></figure><p>4.1py文件第一行执行声明</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;data&#x2F;data&#x2F;com.termux&#x2F;files&#x2F;usr&#x2F;bin&#x2F;python</span><br></pre></td></tr></table></figure><p>4.2py文件权限设置(*代表你的py文件名)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 *.py</span><br></pre></td></tr></table></figure><p>(2)<strong>Termux:Tasker</strong></p><p>插件。用于Tasker等调用。注意：不要在Google Play和F-Droid之间混合安装Termux和插件。<br>下载地址</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#Google Play Store</span><br><span class="line">https:&#x2F;&#x2F;play.google.com&#x2F;store&#x2F;apps&#x2F;details?id&#x3D;com.termux.tasker</span><br><span class="line">#F-Droid</span><br><span class="line">https:&#x2F;&#x2F;f-droid.org&#x2F;packages&#x2F;com.termux.tasker&#x2F;</span><br><span class="line">#更多插件请查看官方Wiki</span><br><span class="line">https:&#x2F;&#x2F;wiki.termux.com&#x2F;wiki&#x2F;Main_Page</span><br></pre></td></tr></table></figure><p>(3)<strong>Tasker</strong>——让安卓全自动化</p><p>这是一个十分强大的应用，你想做的没有做不到的…其实单独使用这个软件就可以完成打卡操作，但步骤过于繁琐，于是就考虑了和Termux双宿双飞。<br>下载地址（上不了Goolge可以考虑apkpure、apkmirror等网站下载)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#Google Play Store</span><br><span class="line">http:&#x2F;&#x2F;market.android.com&#x2F;details?id&#x3D;net.dinglisch.android.taskerm</span><br><span class="line">#官网下载试用</span><br><span class="line">https:&#x2F;&#x2F;tasker.joaoapps.com&#x2F;download.html</span><br></pre></td></tr></table></figure><p>Tasker使用的时候注意好应用权限设置，另外还要自启动、关联启动等应用的设置，以及设置电池优化白名单。<br>大致流程1.创建配置文件-时间 2.创建任务-插件-Termux:Tasker-配置-*.py 3.点√保存</p><hr><p>附：python签到模板(自行修改user、info、url等信息)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;data&#x2F;data&#x2F;com.termux&#x2F;files&#x2F;usr&#x2F;bin&#x2F;python</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import re</span><br><span class="line">import requests</span><br><span class="line">import os</span><br><span class="line">import time</span><br><span class="line">import sys</span><br><span class="line">import json</span><br><span class="line">headers &#x3D; &#123;</span><br><span class="line">    &#39;User-Agent&#39;:&#39;Dart&#x2F;2.7 (dart:io)&#39;</span><br><span class="line">    &#125;</span><br><span class="line">user &#x3D; &#123;</span><br><span class="line">    &quot;username&quot;:&quot;12345678&quot;,</span><br><span class="line">    &quot;password&quot;:&quot;87654321&quot;</span><br><span class="line">    &#125;</span><br><span class="line">info &#x3D; &#123;</span><br><span class="line">    &quot;home&quot;:&quot;在家&quot;,</span><br><span class="line">    &quot;address&quot;:&quot;&quot;,</span><br><span class="line">    &quot;keepInHome&quot;:&quot;否&quot;,</span><br><span class="line">    &quot;keepInHomeDate&quot;:&quot;null&quot;,</span><br><span class="line">    &quot;contact&quot;:&quot;否&quot;,</span><br><span class="line">    &quot;health&quot;:&quot;否&quot;,</span><br><span class="line">    &quot;fever&quot;:&quot;否&quot;,</span><br><span class="line">    &quot;feverValue&quot;:&quot;&quot;,</span><br><span class="line">    &quot;cough&quot;:&quot;否&quot;,</span><br><span class="line">    &quot;diarrhea&quot;:&quot;否&quot;,</span><br><span class="line">    &quot;arriveHubei&quot;:&quot;无&quot;,</span><br><span class="line">    &quot;travel&quot;:&quot;无&quot;,</span><br><span class="line">    &quot;remark&quot;:&quot;无&quot;,</span><br><span class="line">    &quot;submitCount&quot;:1</span><br><span class="line">    &#125;</span><br><span class="line">login_url &#x3D; &quot;http:&#x2F;&#x2F;localhost&#x2F;authentication&#x2F;login&quot;</span><br><span class="line">health_url &#x3D; &quot;http:&#x2F;&#x2F;localhost&#x2F;student&#x2F;healthInfo&#x2F;save&quot;</span><br><span class="line">session &#x3D; requests.session()</span><br><span class="line">login &#x3D; session.post(login_url, json &#x3D; user, headers &#x3D; headers)</span><br><span class="line">cookies &#x3D; session.cookies.get_dict()</span><br><span class="line">health &#x3D; session.post(health_url, json &#x3D; info, headers &#x3D; headers)</span><br><span class="line"></span><br><span class="line">log &#x3D; &quot;.&#x2F;log.txt&quot;</span><br><span class="line">with open(log, &quot;a&quot;) as f:</span><br><span class="line">    f.write(time.strftime(&quot;[%Y&#x2F;%m&#x2F;%d %H:%M:%S]&quot;) + &#39;\n&#39;)</span><br><span class="line">    f.write(json.dumps(cookies, sort_keys&#x3D;True, indent&#x3D;4, separators&#x3D;(&#39;,&#39;, &#39;:&#39;)) + &#39;\n&#39;)</span><br><span class="line">    f.write(json.dumps(health.json(), sort_keys&#x3D;True, indent&#x3D;4, separators&#x3D;(&#39;,&#39;, &#39;:&#39;)) + &#39;\n&#39;)</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>lelia.club/2020/08/28/jiankangxitong/#disqus_thread</comments>
    </item>
    
    <item>
      <title>在Android上使用EFB收发微信消息</title>
      <link>lelia.club/2020/08/21/Android-EFB/</link>
      <guid>lelia.club/2020/08/21/Android-EFB/</guid>
      <pubDate>Fri, 21 Aug 2020 08:23:59 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;工具准备&quot;&gt;&lt;a href=&quot;#工具准备&quot; class=&quot;headerlink&quot; title=&quot;工具准备&quot;&gt;&lt;/a&gt;工具准备&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;arm
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="工具准备"><a href="#工具准备" class="headerlink" title="工具准备"></a>工具准备</h2><ul><li>arm v7/8</li><li>Termux(plal商店下载)</li><li>python3.8</li><li>科学上网环境</li></ul><h2 id="安装基础环境"><a href="#安装基础环境" class="headerlink" title="安装基础环境"></a>安装基础环境</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pkg install python</span><br><span class="line">pkg install openssl</span><br><span class="line">pkg update</span><br><span class="line">pkg upgrade</span><br><span class="line">pkg install python</span><br><span class="line">pkg install openssl</span><br><span class="line">pkg install file</span><br><span class="line">pkg install libwebp</span><br><span class="line">pkg install ffmpeg</span><br><span class="line">pip install cffi cairocffi libmagic pillow</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="安装EFB"><a href="#安装EFB" class="headerlink" title="安装EFB"></a>安装EFB</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install ehforwarderbot efb-telegram-master efb-wechat-slave</span><br></pre></td></tr></table></figure><p><strong>配置模块</strong></p><p>先新建配置文件夹和配置文件config.yaml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~&#x2F;.ehforwarderbot&#x2F;profiles&#x2F;default</span><br><span class="line">nano ~&#x2F;.ehforwarderbot&#x2F;profiles&#x2F;default&#x2F;config.yaml</span><br></pre></td></tr></table></figure><p><em>Default为配置文件默认的文件夹，你也可以命名为其它的，不会的就默认</em></p><p>在打开的界面填入以下内容：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">master_channel: blueset.telegram</span><br><span class="line">slave_channels:</span><br><span class="line">- blueset.wechat</span><br></pre></td></tr></table></figure><p>然后按Ctrl+x 接着按Y 保存退出</p><p><strong>配置电报模块</strong></p><p>首先打开电报软件<br>关注@BotFather<br>到对话框依次输入：<code>/start</code>——<code>/newbot</code><br>然后会要你给机器人命名(填入你想取得名字)，命名完成会给你一个Token，记好此Token<br>然后关注@get_id_bot<br>到对话框输入：<code>/start</code><br>在返回的消息中找到“your chat ID =12345678” 记好等号后面的数字</p><p>再新建一个电报模块配置文件夹和配置文件config.yaml</p><p>使用命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~&#x2F;.ehforwarderbot&#x2F;profiles&#x2F;default&#x2F;blueset.telegram</span><br><span class="line">nano ~&#x2F;.ehforwarderbot&#x2F;profiles&#x2F;default&#x2F;blueset.telegram&#x2F;config.yaml</span><br></pre></td></tr></table></figure><p><em>同样的也建在default文件夹，如果你上面更改了default文件夹，那这里也要更改</em></p><p>在打开的界面填入以下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">token: &quot;你的Token&quot;</span><br><span class="line">admins:</span><br><span class="line">- 你的ID</span><br></pre></td></tr></table></figure><p>然后按Ctrl+x 接着按Y 保存退出</p><p><strong>启动</strong></p><p>在命令行界面输入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ehforwarderbot</span><br></pre></td></tr></table></figure><p>如果你前面换了默认的文件夹，则使用：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ehforwarderbot -p 你文件夹的名字</span><br></pre></td></tr></table></figure><p>使用这个命令后，命令行界面会显示二维码，用自己的微信扫码登录即可。</p><h2 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h2><p>在安装libmagic时一直失败，尝试编译一个，都以失败而告终。</p><p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/21/YvMxBhi1dJ5pWCF.jpg" alt="libmagic.jpg"></p><p>最终，经一位大佬的提醒：“libmagic 在 Termux 的源里面被归到 file 里面了”。尝试<code>pkg install file</code>成功解决。</p><p>另外，EFB下一个版本开始带动画贴纸支持的需要用 pip install “efb-telegram-master[tgs]” 安装了</p><p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/21/HZvNqLhkb7WYIoX.png" alt="ehforwarderbot.png"></p>]]></content:encoded>
      
      <comments>lelia.club/2020/08/21/Android-EFB/#disqus_thread</comments>
    </item>
    
    <item>
      <title>iCopy</title>
      <link>lelia.club/2020/08/12/iCopy/</link>
      <guid>lelia.club/2020/08/12/iCopy/</guid>
      <pubDate>Wed, 12 Aug 2020 08:43:36 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;p&gt;&lt;strong&gt;前言&lt;/strong&gt;：转存Google Drive资源一直不是一件容易的事情，&lt;strong&gt;Rclone系程序&lt;/strong&gt;是现在最常用的手段，虽然现在针对Google
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<p><strong>前言</strong>：转存Google Drive资源一直不是一件容易的事情，<strong>Rclone系程序</strong>是现在最常用的手段，虽然现在针对Google Drive进行针对优化的<strong>魔改版Rclone</strong>已经足够好用，但是每次手动敲命令操作还是有些麻烦。iCopy的出现能很大程度上提高转存效率。iCopy是后端利用Fclone(Rclone的魔改版)转存文件，前端对接了Telegram Bot（TG机器人）进行控制的一个优秀工具，使用它你可以达到这样的效果：<strong>在Telegram聊天窗口将分享链接发给转存Bot，然后选择目标文件夹，Bot就会自动发送指令给VPS，使VPS上的Fclone自动将链接中的文件转存到指定文件夹中。</strong></p><blockquote><p>本文全程在<code>Debian 9</code>环境下进行操作。提供的命令大多在<code>/root/iCopy</code>目录下运行。</p></blockquote><p><code>2020.08.10更新：新增开机启动脚本</code></p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="创建Bot"><a href="#创建Bot" class="headerlink" title="创建Bot"></a>创建Bot</h3><p>首先创建一个TG Bot，在搜索框输入@BotFather，并点击进入对话。</p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/1_creat_bot.png" alt="img"></p><p>点击输入框位置的“<code>开始</code>/<code>Start</code>”，它会给你发送一条消息告诉你如何使用，我们直接输入<code>/newbot</code>开始创建，然后依照它的回复提示，我们接着依次输入我们为Bot设置的昵称和用户名，注意用户名必须以<code>bot</code>三个字母作为结尾，如下图：</p><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/2_set_bot_name.png"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/2_set_bot_name.png" alt="设置Bot名称"></a></p><p>一切设置完毕后，他会发过来一个消息告诉我们Bot创建成功，并附上了Bot的token（红框部分），这是稍后连接Bot的<strong>通行证</strong>，我们将这段token复制下来先粘贴到其他地方保存下来以备后面使用。</p><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/3_get_bot_id.png"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/3_get_bot_id.png" alt="获得token"></a></p><h3 id="获取USER-ID"><a href="#获取USER-ID" class="headerlink" title="获取USER_ID"></a>获取USER_ID</h3><p>在搜索框输入@userinfobot，并点击进入对话。进入对话窗口后，点击输入框位置的“开始/Start”，它会给出你的ID，我们将Id后面的数字复制下来，先粘贴到其他地方保存下来以备后面使用。</p><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/3.5_get_userid.png"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/3.5_get_userid.png" alt="获取USERID"></a></p><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><blockquote><p>iCopy需要使用<strong>MongoDB</strong>数据库，本文将使用<strong>mLab</strong>提供的免费在线数据库进行操作，如果你想在本地搭建MongoDB数据库，请自行搜索教程搭建。</p></blockquote><p><em>如果你已经自己搭建好了MongoDB数据库，请点击右侧目录跳到<strong>『<a href="https://www.yburger.net/skill/icopy.html#_35">安装所需软件</a>』</strong>继续阅读</em></p><p>打开<a href="https://www.mongodb.com/">MongoDB官网</a>，点击<code>Start free</code>，填入相关信息进行注册。</p><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/4_signup_db.png"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/4_signup_db.png" alt="注册MangoDB"></a></p><p>注册成功后，在下图界面选择FREE套餐。</p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/5_choose_free_plan.png" alt="选择免费计划"></p><p>下面选择数据库的地理位置，这个要选择离你VPS位置最近的地方，就比如我的VPS位置是日本东京，所以我就选择了GCP的Tokyo位置的数据库。下方的<code>Cluster Name</code>是数据库名称，我这里保持了默认。</p><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/6_choose_db_area.png"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/6_choose_db_area.png" alt="选择数据库位置"></a></p><p>接下来需要等待1-3分钟才可以创建完成，创建完成后，我们点击网页中的CONNECT。</p><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/7_connect_db.png"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/7_connect_db.png" alt="设置DB"></a></p><p>下面进行设置，首先添加允许连接数据库的IP，你有两种选择：你可以只允许你的VPS连接数据库，那就点击红色箭头指的“Add a Different IP Address”；也可以允许来自任何IP的连接，那就点蓝色箭头指的“Allow Access from Anywhere”。此处我按照第一种选择来，只允许我的VPS连接数据库。</p><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/8_connect_db_setup.png"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/8_connect_db_setup.png" alt="img"></a></p><p>输入你的VPS的IP（如果你选择允许所有IP的连接，这个框里会自动填好内容），点击Add IP Address，</p><p>然后在下面设置好数据库的<strong>用户名和密码</strong>并<strong>记好</strong>，之后要用到。</p><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/9_connect_db_setup_2.png"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/9_connect_db_setup_2.png" alt="img"></a></p><p>然后我们点击右下角绿色的“Choose a connection method”进入下一步，这里我们选择第二个“Connect your application”。</p><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/10_connect_db_setup_3.png"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/10_connect_db_setup_3.png" alt="img"></a></p><p>来到这一步，我们把“DRIVER”选择为<code>Ptyhon</code>，VERSION选择<code>3.6 or later</code>，然后将红框内文字内容中“@”之后的内容复制下来（图中涂黑部分），这就是<strong>数据库地址</strong>，粘贴到其他地方留着一会儿使用，注意其中的<code>&lt;dbname&gt;</code>要更换成你的数据库名称，我之前创建的时候保持了默认，就是<code>Cluster0</code>，数据库地址示例如下：</p><p><strong><code>cluster0.avbqq.gcp.mongodb.net/Cluster0?retryWrites=true&amp;w=majority</code></strong></p><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/11_connect_db_setup_4.png"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/11_connect_db_setup_4.png" alt="img"></a></p><h3 id="安装所需软件"><a href="#安装所需软件" class="headerlink" title="安装所需软件"></a>安装所需软件</h3><p>在VPS上运行以下指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install screen unzip wget git nano -y</span><br></pre></td></tr></table></figure><h2 id="安装Python-3-8"><a href="#安装Python-3-8" class="headerlink" title="安装Python 3.8"></a>安装Python 3.8</h2><p><em>如果本机已有Python 3.8环境，请点击右侧目录跳到<strong>『<a href="https://www.yburger.net/skill/icopy.html#_54">生成SA账户</a>』</strong>继续阅读</em></p><p>在ssh中运行以下命令编辑软件源。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>在末尾添加这一行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb http://ftp.de.debian.org/debian testing main</span><br></pre></td></tr></table></figure><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/12_add_source.gif"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/12_add_source.gif" alt="添加软件源"></a></p><p><code>Ctrl</code>+<code>X</code>保存，按键盘<code>Y</code>确定保存，然后按<code>回车（Return）</code>保存成功。然后依次运行下面的几条命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python3.8 -y</span><br></pre></td></tr></table></figure><p>运行上面这一条命令后遇到意外的可以点开看一下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.8 1</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python3-pip -y</span><br></pre></td></tr></table></figure><p>使用命令<code>python3 -V</code>检查是不是3.8版本 ，以及使用命令<code>pip3 -V</code>检查是不是关联3.8，确认版本正确就可以进行下一步了</p><h2 id="生成SA账户"><a href="#生成SA账户" class="headerlink" title="生成SA账户"></a>生成SA账户</h2><p><em>如果你已经生成过SA账户，请点击右侧目录跳到<strong>『<a href="https://www.yburger.net/skill/icopy.html#_61">安装Fclone</a>』</strong>继续阅读</em></p><p>若要生成SA账户，请参考下面幽游地博主@余十一的文章。</p><p>下面这篇文章从<strong>目录中的『安装详细过程』-『安装AutoRclone』这一步开始看，一直到看完『安装详细过程』-『将service accounts加入Google Groups』-『Group邮箱添加到TeamDrive』这一步就停止</strong>，只看这中间的内容，不要看其他部分的内容，否则会有冲突！</p><p>文章地址：<a href="https://www.uud.me/qiwenzalun/autorclone-gclone.html#%E5%AE%89%E8%A3%85AutoRclone">AutoRclone配合gclone突破GoogleTeamDrive750G流量限制</a></p><h2 id="安装Fclone"><a href="#安装Fclone" class="headerlink" title="安装Fclone"></a>安装Fclone</h2><p>在ssh中运行以下命令安装Fclone</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(wget -qO- https://git.io/JJYE0)</span><br></pre></td></tr></table></figure><p><em>如果你之前正在使用gclone工具并且正确配置了网盘和SA账户，请点击右侧目录跳到<strong>『<a href="https://www.yburger.net/skill/icopy.html#_70">安装iCopy</a>』</strong>继续阅读</em></p><p>如果没有，请参考下面幽游地博主@余十一的文章。</p><blockquote><p>下面这篇文章请<strong>仅看目录中的『如何使用』-『配合gclone』-『配置gclone』这一步，看完这一步就停止</strong>，只看这中间的内容，不要看其他部分的内容，否则会有冲突！并且文中提到的所有命令都要把“gclone”换成“fclone”在运行！</p></blockquote><p>文章地址：<a href="https://www.uud.me/qiwenzalun/autorclone-gclone.html#%E5%AE%89%E8%A3%85gclone">AutoRclone配合gclone突破GoogleTeamDrive750G流量限制</a></p><h2 id="安装iCopy"><a href="#安装iCopy" class="headerlink" title="安装iCopy"></a>安装iCopy</h2><h3 id="在VPS上安装"><a href="#在VPS上安装" class="headerlink" title="在VPS上安装"></a>在VPS上安装</h3><p>拉取iCopy最新代码并进入文件夹。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/fxxkrlab/iCopy.git &amp;&amp; <span class="built_in">cd</span> iCopy</span><br></pre></td></tr></table></figure><p>设置权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x iCopy.py</span><br></pre></td></tr></table></figure><p>安装依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -r requirements.txt</span><br></pre></td></tr></table></figure><p>生成配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp config/conf.toml.example config/conf.toml</span><br></pre></td></tr></table></figure><p>编辑配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano config/conf.toml</span><br></pre></td></tr></table></figure><p>按图所示进行修改</p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/14_icopy_config.png" alt="img"></p><p>修改后依旧<code>Ctrl</code>+<code>X</code>保存，按键盘<code>Y</code>确定保存，然后按<code>回车（Return）</code>保存成功。</p><p>我们可以试运行一下脚本，看能不能启动成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 iCopy.py</span><br></pre></td></tr></table></figure><p>出现几个warning不要紧，只要出现图中红框部分的那一行字，就算运行成功。</p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/15_start_bot.png" alt="启动成功"></p><p>不过这样子启动，一旦断开SSH机器人也会马上掉线，所以我们可以使用screen让他后台运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen -dmS iCopy `<span class="built_in">which</span> python3` iCopy.py</span><br></pre></td></tr></table></figure><p>用screen启动后，如果想要停止运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen -X -S iCopy quit</span><br></pre></td></tr></table></figure><h3 id="导入机器人指令"><a href="#导入机器人指令" class="headerlink" title="导入机器人指令"></a>导入机器人指令</h3><p>现在的机器人只是启动成功了，但是还无法正常使用，我们需要手动导入指令，在TG找到@BotFather，发送<code>/mybots</code>，选择你刚刚创建的bot。</p><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/16_add_function.png"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/16_add_function.png" alt="img"></a></p><p>复制下面的文本，按下图所示添加指令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">menu - 主入口&#x2F;选择模式</span><br><span class="line">quick - 极速模式</span><br><span class="line">copy - 自定义模式</span><br><span class="line">set - 自定义设置</span><br><span class="line">cancel - 取消对话</span><br><span class="line">size - 查询大小</span><br><span class="line">reset - 重置任务(后面可跟id)</span><br><span class="line">dedupe - 删除重复文件</span><br><span class="line">purge - 清空指定盘回收站</span><br><span class="line">task - 任务查询</span><br><span class="line">kill - 杀死进程中任务</span><br><span class="line">ver - 检查iCopy版本</span><br><span class="line">restart - 重新启动iCopy</span><br></pre></td></tr></table></figure><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/17_add_function.gif"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/17_add_function.gif" alt="添加指令"></a></p><p>然后你就可以使用完整命令的Bot了。</p><h2 id="使用Bot转存"><a href="#使用Bot转存" class="headerlink" title="使用Bot转存"></a>使用Bot转存</h2><p><strong>设置转存文件夹</strong>：</p><p>在TG聊天窗口给Bot发送<code>/set quick + 文件夹ID</code>以添加一个（最多一个）<code>快速转存文件夹</code>。</p><p>在TG聊天窗口给Bot发送<code>/set quick - 文件夹ID</code>以删除一个（最多一个）<code>快速转存文件夹</code>。</p><p>在TG聊天窗口给Bot发送<code>/set fav + 文件夹ID</code>以添加一个（数量无上限）<code>书签文件夹</code>。</p><p>在TG聊天窗口给Bot发送<code>/set fav - 文件夹ID</code>以删除一个（数量无上限）<code>书签文件夹</code>。</p><p><strong>转存实操</strong>：</p><p>设置好至少一个转存文件夹后，我们就可以开始转存操作了。</p><p>快速转存：发送<code>/menu</code>，选择<code>极速模式</code>，发送<code>分享链接</code>。</p><p><a href="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/18_trans.gif"><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/yburger/blogpic/iCopy/18_trans.gif" alt="img"></a></p><p>自定义模式同理，只是多了一步选择目标位置（从添加的<code>书签文件夹</code>里选）。</p><h2 id="开机自启"><a href="#开机自启" class="headerlink" title="开机自启"></a>开机自启</h2><p>有些小伙伴说需要开机自启，这里也顺便提一下。</p><p>如果你选择已经使用screen启动了程序，先用<code>screen -X -S iCopy quit</code>关掉它</p><p>创建启动脚本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/iCopy</span><br><span class="line">nano start.sh</span><br></pre></td></tr></table></figure><p>输入以下内容，并保存文件。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#! &#x2F;bin&#x2F;bash</span><br><span class="line"></span><br><span class="line">cd &#x2F;root&#x2F;iCopy</span><br><span class="line">python3 iCopy.py</span><br></pre></td></tr></table></figure><p>赋予权限：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x start.sh</span><br></pre></td></tr></table></figure><p>将以下代码<strong>一起复制</strong>到SSH运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/systemd/system/icopy.service &lt;&lt;EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description=icopy</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/root/iCopy/start.sh</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>然后启动服务并设置开机自启</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start icopy</span><br><span class="line">systemctl <span class="built_in">enable</span> icopy</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>lelia.club/2020/08/12/iCopy/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Huawei Honor8 FRD-AL10刷机教程</title>
      <link>lelia.club/2020/08/11/android-root/</link>
      <guid>lelia.club/2020/08/11/android-root/</guid>
      <pubDate>Tue, 11 Aug 2020 10:06:35 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;ul&gt;
&lt;li&gt;工具：&lt;ul&gt;
&lt;li&gt;硬件：Windows 10, Huawei Honor8 FRD-AL10&lt;/li&gt;
&lt;li&gt;软件：刷机工具-fastboot，第三方rec-奇图rec镜像文件，刷机包-LineageOS 16.0 Build
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<ul><li>工具：<ul><li>硬件：Windows 10, Huawei Honor8 FRD-AL10</li><li>软件：刷机工具-fastboot，第三方rec-奇图rec镜像文件，刷机包-LineageOS 16.0 Build 4</li></ul></li></ul><blockquote><p>前言：刷机有风险，刷机前自行备份数据。</p></blockquote><h3 id="第一步、解锁BL锁"><a href="#第一步、解锁BL锁" class="headerlink" title="第一步、解锁BL锁"></a>第一步、解锁BL锁</h3><p><code>注意：华为已于2018年5月关闭解锁码申请通道</code></p><p>如需解锁，请去淘宝购买“解锁码”。</p><h3 id="第二步、必要的设置"><a href="#第二步、必要的设置" class="headerlink" title="第二步、必要的设置"></a>第二步、必要的设置</h3><ol><li><p>将查找手机和云空间关闭，指纹全部删除。</p></li><li><p>开启USB调试模式</p><ol><li>在版本号这一栏多次点击，出现“您已处于开发者模式”后，进入开发者模式打开USB调试功能。</li></ol></li><li><p>准备软件</p><ol><li>刷机工具-fastboot <a href="https://share.weiyun.com/LkWrGIyG">点击下载</a></li><li>第三方rec-奇图rec镜像文件 huawei-honor-8-em8_0_qitu.img  <a href="https://share.weiyun.com/uN1lVzLd">点击下载</a></li><li>刷机包-LineageOS 16.0 Build 4镜像文件 <a href="https://openkirin.net/download/">点击下载</a><ol><li>该网站包含AOSP,OmniROM, Resurrection Remix OS, LineageOS，只要下载一个。原来的系统是EMUI8就选EMUI 8-based Builds下的。</li></ol></li></ol></li><li><p>放置文件</p><ol><li><p>解压刷机工具fastboot并生成fastboot文件夹，解压LineageOS 16.0 Build 4.xz为镜像文件。</p></li><li><p>将解压得到的<code>huawei-honor-8-em8_0_qitu.img</code>和下载的<code>huawei-honor-8-em8_0_qitu.img</code>镜像文件放到生成的fastboot文件夹内。如下图所示：</p><p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/11/YnDdUhKVs1N5cak.jpg" alt="文件夹内包含的文件"></p></li></ol></li></ol><h3 id="第三步、进入fastboot模式"><a href="#第三步、进入fastboot模式" class="headerlink" title="第三步、进入fastboot模式"></a>第三步、进入fastboot模式</h3><p>手机关机，待完全关闭后，用数据线连接电脑，按住<code>电源键</code>+<code>音量下键</code>，知道出现安卓绿色小机器人，下方应为红字phone unlocked。</p><p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/11/F7zVPZHNahCopKg.jpg" alt="phone unlocked"></p><h3 id="刷入奇兔rec"><a href="#刷入奇兔rec" class="headerlink" title="刷入奇兔rec"></a>刷入奇兔rec</h3><ol><li><p>在fastboot文件夹看空白处，按住<code>shift</code>+<code>鼠标右键</code>，进入PowerShell</p></li><li><p>在powerShell中输入命令：</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\fastboot flash recovery_ramdisk huawei-honor-<span class="number">8</span>-em8_0_qitu.img</span><br></pre></td></tr></table></figure><ol start="3"><li><p>直到出现”finished“和后面的所用时间,则成功。</p></li><li><p>清除数据</p><ol><li><p>拔掉USB数据线，按住<code>电源键</code>+<code>音量上键</code>，直到出现honor和logo(可以松开案件了)，进入twrp recovery模式。</p></li><li><p>点击“清除”，选择“格式化data分区”，yes</p><p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/11/aJm7EvP8lkAOFoD.png" alt="Screenshot_2020-08-11-06-24-21.png"></p></li></ol></li></ol><p>   按界面最下边的左边的三角形回到主界面，回到主界面都按这个</p><p>   <img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/11/P7RHTGFs3rYn9BC.png" alt="Screenshot_2020-08-11-06-24-211.png"></p><p>点击”高级”，选择”移除DATA”强制加密</p><p><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/08/11/il6GZxmpehCFMvn.png" alt="Screenshot_2020-08-11-06-25-15.png"></p><p>回到主界面，选择”重启”，”关机”</p><h3 id="刷入刷机包"><a href="#刷入刷机包" class="headerlink" title="刷入刷机包"></a>刷入刷机包</h3><p>手机关机后，用数据线连接电脑，按住<code>电源键</code>+<code>音量下键</code>，直到安卓绿色小机器人再次进入fastboot模式。</p><p>在fastboot文件夹空白处 按住<code>shift</code>+<code>鼠标右键</code>，进入powershell</p><p>在powershell输入命令：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\fastboot flash system LineageOS <span class="number">16.0</span> Build <span class="number">4.</span>img</span><br></pre></td></tr></table></figure><p>直到出现”finished”和后面的所用时间。</p><h3 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h3><p>在powershell输入命令：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\fastboot reboot</span><br></pre></td></tr></table></figure><p>拔掉USB数据线，接下来它会自动开机</p><p>刷机完毕</p><h3 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h3><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul><li>第一次开机配置不要连接wifi，否则会导致无法进入系统（无限卡谷歌）。配置完后可连接wifi，一开始会显示”已经连接但不可以上网“，实际上是可以上的。</li><li>通知栏中的pixel设置和Android设备可以长按停止通知。</li></ul>]]></content:encoded>
      
      <comments>lelia.club/2020/08/11/android-root/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Go语言学习</title>
      <link>lelia.club/2020/08/05/Go/</link>
      <guid>lelia.club/2020/08/05/Go/</guid>
      <pubDate>Wed, 05 Aug 2020 06:43:36 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;基本语法–变量&quot;&gt;&lt;a href=&quot;#基本语法–变量&quot; class=&quot;headerlink&quot; title=&quot;基本语法–变量&quot;&gt;&lt;/a&gt;基本语法–变量&lt;/h2&gt;&lt;h3 id=&quot;变量的使用&quot;&gt;&lt;a href=&quot;#变量的使用&quot; class=&quot;headerlink&quot;
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="基本语法–变量"><a href="#基本语法–变量" class="headerlink" title="基本语法–变量"></a>基本语法–变量</h2><h3 id="变量的使用"><a href="#变量的使用" class="headerlink" title="变量的使用"></a>变量的使用</h3><h4 id="什么是变量"><a href="#什么是变量" class="headerlink" title="什么是变量"></a>什么是变量</h4><p>变量是为储存特定类型的值而提供给内存位置的名称。在go中声明变量有多种语法。</p><p>所以<code>变量的本质就是一小块内存</code>，用于储存数据，在程序运行过程过程中数值可以改变（若不可改变则为常量）</p><p>使用：</p><ul><li><p><code>step1</code>：变量的声明，也叫定义</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">第一种：var</span> <span class="string">变量名</span> <span class="string">数据类型</span></span><br><span class="line">       <span class="string">变量名</span> <span class="string">=</span> <span class="string">赋值</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">第二种：类型推断，省略数据类型</span></span><br><span class="line">       <span class="string">var</span> <span class="string">变量名</span> <span class="string">=</span> <span class="string">赋值</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">第三种：简短声明，省略var</span></span><br><span class="line">       <span class="string">变量名</span> <span class="string">:=</span> <span class="string">赋值</span>            </span><br></pre></td></tr></table></figure></li><li><p><code>step2</code>：变量的访问，赋值和取值</p></li></ul><p>go的特性：</p><ul><li><p>静态语言：强类型语言</p><ul><li><code>go</code>, <code>java</code>, <code>c++</code>, <code>c#</code>。。</li></ul></li><li><p>动态语言：弱类型语言</p><ul><li><code>JavaScript</code>, <code>php</code>, <code>Python</code>,  <code>Ruby</code>。。</li></ul><h4 id="声明变量"><a href="#声明变量" class="headerlink" title="声明变量"></a>声明变量</h4></li></ul><p>var名称类型是声明单个变量的语法。</p><blockquote><p>以字母或下划线开头，由一个或多个字母、数字、下划线组成</p></blockquote><p>声明一个变量</p><p>第一种，指定变量类型，声明后若不赋值，使用默认值</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name <span class="keyword">type</span></span><br><span class="line">name = value</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//第一种：定义变量，然后进行赋值</span></span><br><span class="line">    <span class="keyword">var</span> num1 <span class="keyword">int</span></span><br><span class="line">    num1 = <span class="number">30</span></span><br><span class="line">    fmt.Printf( format:<span class="string">&quot;num1的数值是:%d\n&quot;</span>,num1)</span><br><span class="line">    <span class="comment">//写在一行</span></span><br><span class="line">    <span class="keyword">var</span> num2 <span class="keyword">int</span> = <span class="number">20</span></span><br><span class="line">    fmt.Printf( format:<span class="string">&quot;num2的数值是:%d\n&quot;</span>,num2)</span><br><span class="line">    <span class="comment">//第二种：类型推断</span></span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;中文&quot;</span></span><br><span class="line">    fmt.Printf( foirmat: <span class="string">&quot;类型是：%T, 数值是:%s\n&quot;</span>,name,name)</span><br><span class="line">    <span class="comment">//第三种：简短声明</span></span><br><span class="line">    sum := <span class="number">100</span></span><br><span class="line">    fmt.Printf(sum)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//多变量同时定义</span></span><br><span class="line">    <span class="keyword">var</span> a, b, c <span class="keyword">int</span></span><br><span class="line">    a = <span class="number">10</span></span><br><span class="line">    b = <span class="number">20</span></span><br><span class="line">    c = <span class="number">30</span></span><br><span class="line">    fmt.Println(a, b, c)</span><br><span class="line">    <span class="comment">//写在一行</span></span><br><span class="line">    <span class="keyword">var</span> d, e, f <span class="keyword">int</span> = <span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span></span><br><span class="line">    fmt.Println(d, e, f)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> q, o, p = <span class="number">1000</span>, <span class="number">3.24</span>, <span class="string">&quot;呵呵&quot;</span></span><br><span class="line">    fmt.Println(q,o,p)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        studentName = <span class="string">&quot;理想&quot;</span></span><br><span class="line">        age = <span class="number">20</span></span><br><span class="line">        sex = <span class="string">&quot;男&quot;</span></span><br><span class="line">    )</span><br><span class="line">    fmt.Printf(<span class="string">&quot;学生姓名: %s, 年龄: %d, 性别: %s\n&quot;</span>,studentName, age,sex)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><ol><li>变量必须先定义才能使用<ul><li>定义的过程就是开辟内存的过程。先分配内存才能进行存储和访问的操作</li></ul></li><li>go语言是静态语言，在进行定义变量的时候是可以使用类型推断的。这要求变量的类型和赋值的类型必须一致。</li><li>变量名不能冲突。（同一个作用于域内不能冲突）</li><li>简短定义方式，左边的变量名至少有一个是新的</li><li>简短定义方式，不能定义全局变量。</li><li>变量的零值，也叫默认值。<ul><li>整型：默认值是0</li><li>浮点类型：默认值是0</li><li>字符串：默认值是””</li><li>变量的定义必须使用，不使用则会报错。这是go语言的编译检查</li></ul></li></ol><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> num <span class="keyword">int</span></span><br><span class="line">    num = <span class="number">100</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;num的数值是：%d, 地址是：%p\n&quot;</span>,num,&amp;num)</span><br><span class="line">    <span class="comment">//如果变量num2没有定义</span></span><br><span class="line">    fmt.Println(num2)</span><br><span class="line">    <span class="comment">//则会报错 ---./prog.go:18:14: undefined: num2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name <span class="keyword">string</span></span><br><span class="line">    name = <span class="number">100</span></span><br><span class="line">    fmt.Println(name)</span><br><span class="line">    <span class="comment">//变量的类型为字符串，而赋值却不是</span></span><br><span class="line">    <span class="comment">//报错：cannot use 100 (type untyped int) as type string in assignment</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name <span class="keyword">int</span></span><br><span class="line">    name = <span class="number">200</span></span><br><span class="line">    fmt.Println(name)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> name <span class="keyword">int</span> = <span class="number">300</span></span><br><span class="line">    fmt.Println(name)</span><br><span class="line">    <span class="comment">//使用同意变量名name</span></span><br><span class="line">    <span class="comment">//报错:name redeclared in this block previous declaration</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> studentName, age = <span class="string">&quot;千千&quot;</span>, <span class="number">18</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;姓名：%s, 年龄：%d\n&quot;</span>,studentName, age)</span><br><span class="line">    </span><br><span class="line">    studentName, age := <span class="string">&quot;龙叔&quot;</span>, <span class="number">20</span></span><br><span class="line">    fmt.Println(studentName, age)</span><br><span class="line">    <span class="comment">// := 左边没有一个新的变量</span></span><br><span class="line">    <span class="comment">//报错：no new variables on left side of :=</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10000</span></span><br><span class="line"><span class="keyword">var</span> b <span class="keyword">int</span> = <span class="number">20000</span></span><br><span class="line">c := <span class="number">30000</span> <span class="comment">//语法错误</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(a)</span><br><span class="line">    fmt.Println(b)</span><br><span class="line">    fmt.Println(c)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//报错：syntax error: non-declaration statement outside function body</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> k <span class="keyword">int</span> <span class="comment">//整数，默认值是0</span></span><br><span class="line">    fmt.Println(k)</span><br><span class="line">    <span class="keyword">var</span> s <span class="keyword">float64</span> <span class="comment">//0.0 -&gt; 0</span></span><br><span class="line">    fmt.Println(s)</span><br><span class="line">    <span class="keyword">var</span> z <span class="keyword">string</span> <span class="comment">// 空的字符串&quot;&quot;</span></span><br><span class="line">    fmt.Println(z)</span><br><span class="line">    <span class="keyword">var</span> p []<span class="keyword">int</span> <span class="comment">//空的切片[]</span></span><br><span class="line">    fmt.Println(p == <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="基本语法–常量constant"><a href="#基本语法–常量constant" class="headerlink" title="基本语法–常量constant"></a>基本语法–常量constant</h2><h3 id="一、常量的使用"><a href="#一、常量的使用" class="headerlink" title="一、常量的使用"></a>一、常量的使用</h3><h4 id="常量声明"><a href="#常量声明" class="headerlink" title="常量声明"></a>常量声明</h4><p>常量是一个简单值的标识符，在程序运行时，不会被修改的量。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> identifier [<span class="keyword">type</span>] = value</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">显示类型定义：<span class="keyword">const</span> b <span class="keyword">string</span> = <span class="string">&quot;abc&quot;</span></span><br><span class="line">隐式类型定义：<span class="keyword">const</span> b = <span class="string">&quot;abc&quot;</span></span><br></pre></td></tr></table></figure><p>常量名的编码规范要求所有字母都大写</p><p>变量定义要使用，否则会报错。但是常量不会报错</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">//常数</span></span><br><span class="line">    fmt.Println(<span class="number">100</span>)</span><br><span class="line">    fmt.Println(<span class="string">&quot;hahah&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//定义常数</span></span><br><span class="line">    <span class="keyword">const</span> PATH <span class="keyword">string</span> = <span class="string">&quot;https://lelia.club&quot;</span></span><br><span class="line">    <span class="keyword">const</span> PI = <span class="number">3.14</span></span><br><span class="line">    fmt.Println(PATH)</span><br><span class="line">    <span class="comment">//fmt.Println(PI)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//尝试修改常量的数值</span></span><br><span class="line">    PATH = <span class="string">&quot;https://lelia.com&quot;</span>  <span class="comment">//cannot assign to PATH</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//定义一组常量</span></span><br><span class="line">    <span class="keyword">const</span> C1, C2, C3 = <span class="number">100</span>, <span class="number">3.14</span>, <span class="string">&quot;字符串&quot;</span></span><br><span class="line">    <span class="keyword">const</span> (</span><br><span class="line">        MALE   = <span class="number">10</span></span><br><span class="line">        FEMALE = <span class="number">1</span></span><br><span class="line">        UNKNOW = <span class="number">2</span></span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 一组常量种，如果某个常量没有初始值，默认和上一行一致</span></span><br><span class="line">    <span class="keyword">const</span> (</span><br><span class="line">        MAO <span class="keyword">string</span> = <span class="string">&quot;hahha&quot;</span></span><br><span class="line">        GOU</span><br><span class="line">        HU <span class="keyword">int</span> = <span class="number">10000</span></span><br><span class="line">        CAO</span><br><span class="line">        ZAO</span><br><span class="line">    )</span><br><span class="line">    fmt.Printf(<span class="string">&quot;类型是：%T, 数值是：%s\n&quot;</span>, MAO, MAO)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;类型是：%T, 数值是：%s\n&quot;</span>, GOU, GOU)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;类型是：%T, 数值是：%d\n&quot;</span>, HU, HU)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;类型是：%T, 数值是：%d\n&quot;</span>, CAO, CAO)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;类型是：%T, 数值是：%d\n&quot;</span>, ZAO, ZAO)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//枚举类型：使用常量组作为枚举类型。一组相关数值的数据</span></span><br><span class="line">    <span class="keyword">const</span> (</span><br><span class="line">        SPRING = <span class="number">0</span></span><br><span class="line">        SUMMER = <span class="number">1</span></span><br><span class="line">        AUTUMN = <span class="number">2</span></span><br><span class="line">        WINRER = <span class="number">3</span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="常量的注意事项"><a href="#常量的注意事项" class="headerlink" title="常量的注意事项"></a>常量的注意事项</h4><ul><li>常量中的数据类型只可以是布尔型、数字型（整数型、浮点型和复数）和字符串型</li><li>不曾使用的常量，在编译的时候，是不会报错的</li><li>显示指定类型的时候，必须确保常量左右值类型一致，需要时可做显式类型转换。这与变量就不一样了，变量是可以是不同的类型值</li></ul><h4 id="iota"><a href="#iota" class="headerlink" title="iota"></a>iota</h4><p>iota，特殊常量，可以认为是一个可以被编译器修改的常量</p><p>iota 可以被用作枚举值</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    A = <span class="literal">iota</span></span><br><span class="line">    B = <span class="literal">iota</span></span><br><span class="line">    C = <span class="literal">iota</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>第一个iota等于0，每当iota在新的一行被使用时，他的值都会自动加1，所以 A = 0, B = 1, C = 2可以简写为以下形式：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    A = <span class="literal">iota</span></span><br><span class="line">    B</span><br><span class="line">    C</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>iota用法</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">const</span> (</span><br><span class="line">        A = <span class="literal">iota</span>         <span class="comment">// 0</span></span><br><span class="line">        B                <span class="comment">// 1</span></span><br><span class="line">        C                <span class="comment">// 2</span></span><br><span class="line">        D = <span class="string">&quot;HAHAHA&quot;</span>     <span class="comment">// 独立值，iota = 3</span></span><br><span class="line">        E                <span class="comment">// &quot;HAHAHA&quot; iota = 4</span></span><br><span class="line">        F = <span class="number">100</span>            <span class="comment">// 100 iota = 5</span></span><br><span class="line">        G                <span class="comment">// 100 iota = 6</span></span><br><span class="line">        H = <span class="literal">iota</span>        <span class="comment">// iota iota = 7</span></span><br><span class="line">        I                <span class="comment">// iota = 8</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">const</span> (</span><br><span class="line">        J = <span class="literal">iota</span>        <span class="comment">// iota = 0</span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="基本语法–数据类型"><a href="#基本语法–数据类型" class="headerlink" title="基本语法–数据类型"></a>基本语法–数据类型</h2><h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><p>以下是go中可用的基本数据类型</p><ul><li><code>bool</code></li><li><code>Numeric Types</code><ul><li><code>int8</code>, <code>int16</code>, <code>int32</code>, <code>int64</code>, <code>int</code></li><li><code>uint8</code>, <code>uint16</code>, <code>uint32</code>, <code>uint64</code>, <code>uint</code></li><li><code>float32</code>, <code>float64</code></li><li><code>complex64</code>, <code>complex128</code></li><li><code>byte</code></li><li><code>rune</code></li></ul></li><li><code>string</code></li></ul><h4 id="布尔型-bool"><a href="#布尔型-bool" class="headerlink" title="布尔型 bool"></a>布尔型 bool</h4><p>布尔型的值可以是常量 <code>true</code> 或者 <code>false</code>。一个简单的例子：var b bool = true</p><h4 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h4><ul><li>整数：</li><li>浮点：生活中的小数</li><li>复数：complex，</li></ul><h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><h3 id="复合数据类型"><a href="#复合数据类型" class="headerlink" title="复合数据类型"></a>复合数据类型</h3>]]></content:encoded>
      
      <comments>lelia.club/2020/08/05/Go/#disqus_thread</comments>
    </item>
    
    <item>
      <title>UX | 如何编写交互文档</title>
      <link>lelia.club/2020/08/03/Design%20Requirement%20Document/</link>
      <guid>lelia.club/2020/08/03/Design%20Requirement%20Document/</guid>
      <pubDate>Mon, 03 Aug 2020 13:17:02 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;什么是交互文档？&quot;&gt;&lt;a href=&quot;#什么是交互文档？&quot; class=&quot;headerlink&quot; title=&quot;什么是交互文档？&quot;&gt;&lt;/a&gt;什么是交互文档？&lt;/h2&gt;&lt;p&gt;交互文档，即交互设计说明文档。英文 ”Design Requirement
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="什么是交互文档？"><a href="#什么是交互文档？" class="headerlink" title="什么是交互文档？"></a>什么是交互文档？</h2><p>交互文档，即交互设计说明文档。英文 ”Design Requirement Document“，缩写<code>&quot;DRD&quot;</code> 。用来承载<code>设计方案</code>、<code>交互原型</code>、<code>交互说明</code>等内容，存档并交互项目相关伙伴的团队协作文档。</p><h2 id="为什么需要交互文档？"><a href="#为什么需要交互文档？" class="headerlink" title="为什么需要交互文档？"></a>为什么需要交互文档？</h2><p>你也许会说：“产品经理就可输出DRD，无需交互设计师。”但其实，许多交互设计师也可承担产品经理的角色…说白了，岗位名称不过是对工作职责的划分而已，是公司或部门提高专业性和工作效率已达到公司目标的一种方式。</p><p>交互设计师的作用是<code>“对接上下游，承上启下”</code>，无论是在方案审评的讲解，还是日常的工作沟通，都应具备优秀的语言表达和DRD表达能力。</p><p>而DRD不仅能完美阐释产品内容和设计思路，还利于设计规范与统一，让产品保持一致性，在项目各方协调工作中起到重要作用，也方便后期进行项目总结。</p><p>因此，DRD是利于团队协作的媒介，也是产品规范与项目总结的重要输出物。</p><h2 id="有谁在看交互文档？"><a href="#有谁在看交互文档？" class="headerlink" title="有谁在看交互文档？"></a>有谁在看交互文档？</h2><p><strong>业务方/需求方</strong>：包括产品经理/运营经理，这里大多指产品经理。</p><p>Ta们会通过DRD关注你的设计方案是否满足业务和用户需求。交互设计师与Ta们讨论产品规划及业务需求后，结合用户需求，分解关键因素，最终归纳出设计需求。而DRD正是整个设计思路的阐述媒介。</p><p><strong>视觉设计师</strong>：这里包括视觉UI设计师，包括动画设计师。</p><p>Ta们需要知道产品定位是怎样的？有哪些页面要设计？页面间的跳转是怎样的？各页面各元素包括什么状态？遇到特殊情况（数据加载、网络异常、极端情况）如何设计？</p><p><strong>开发人员</strong>：包括IOS、Android、H5、Web等前端开发工程师和后端工程师。</p><p>Ta们需从DRD知道，产品要实现多少功能？多少页面？如何去实现？页面间是怎么跳转的？异常情况怎么处理？…然后用代码将其实现出来。</p><p><strong>测试人员</strong>：包括测试工程师和参与测试的其他人。</p><p>Ta们需要参考DRD梳理测试用例，测试用例须覆盖所有功能、使用场景、操作行为、产品细节，需保证上线无bug，或是少bug状态。</p>]]></content:encoded>
      
      <comments>lelia.club/2020/08/03/Design%20Requirement%20Document/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Telegram-Name-Updating 报时bot</title>
      <link>lelia.club/2020/07/29/Telegram-bot/</link>
      <guid>lelia.club/2020/07/29/Telegram-bot/</guid>
      <pubDate>Wed, 29 Jul 2020 02:44:00 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;1-准备&quot;&gt;&lt;a href=&quot;#1-准备&quot; class=&quot;headerlink&quot; title=&quot;1.准备&quot;&gt;&lt;/a&gt;1.准备&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;运行环境：VPS, Python, Python3-pip&lt;br&gt;创建应用：&lt;a
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="1-准备"><a href="#1-准备" class="headerlink" title="1.准备"></a>1.准备</h2><hr><p>运行环境：VPS, Python, Python3-pip<br>创建应用：<a href="https://my.telegram.org/">进入官网</a> 只要填APP title和short name即可。获取 api_id 和  api_hash</p><h2 id="2-下载Demo小程序到VPS上"><a href="#2-下载Demo小程序到VPS上" class="headerlink" title="2.下载Demo小程序到VPS上"></a>2.下载Demo小程序到VPS上</h2><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="comment">//github.com/xyou365/Telegram-Name-Updating.git</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd Telegram-Name-Updating</span><br></pre></td></tr></table></figure><h2 id="3-安装telethon"><a href="#3-安装telethon" class="headerlink" title="3.安装telethon"></a>3.安装telethon</h2><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -r requirements.txt</span><br></pre></td></tr></table></figure><h2 id="4-运行Demo小程序"><a href="#4-运行Demo小程序" class="headerlink" title="4.运行Demo小程序"></a>4.运行Demo小程序</h2><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 tg_username_update.py</span><br></pre></td></tr></table></figure><h2 id="5-api认证和用户登录"><a href="#5-api认证和用户登录" class="headerlink" title="5.api认证和用户登录"></a>5.api认证和用户登录</h2><hr><p>根据提示输入api_id和api_hash。接着输入手机号和验证码，如果账号开启了二次验证，根据提示再输入二次验证的密码。最后看到 It works！表明成功了。默认的是每秒30按照一定概率更新一次lastname到特定模式。</p>]]></content:encoded>
      
      <comments>lelia.club/2020/07/29/Telegram-bot/#disqus_thread</comments>
    </item>
    
    <item>
      <title>simpread-人形自走 bot PagerMaid-Modify 的食用笔记</title>
      <link>lelia.club/2020/07/29/Telegram-bot(PagerMaid)/</link>
      <guid>lelia.club/2020/07/29/Telegram-bot(PagerMaid)/</guid>
      <pubDate>Wed, 29 Jul 2020 02:38:50 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;p&gt;申请Telegram api&lt;br&gt;&lt;a href=&quot;https://i.loli.net/2020/06/20/3C5h1ZmTNoncWxv.png&quot;&gt;&lt;img src= &quot;/img/loading.gif&quot;
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<p>申请Telegram api<br><a href="https://i.loli.net/2020/06/20/3C5h1ZmTNoncWxv.png"><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/06/20/3C5h1ZmTNoncWxv.png"></a></p><p><a href="https://i.loli.net/2020/06/20/LoI2jFgVM5PqxSh.png"><img src= "/img/loading.gif" data-lazy-src="https://i.loli.net/2020/06/20/LoI2jFgVM5PqxSh.png"></a></p><ol><li><a href="https://core.telegram.org/api">api 申请链接</a></li><li>Creating an application</li><li>API development tools</li><li>填写表格</li></ol><h2 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">apt-get</span> <span class="string">install</span> <span class="string">git</span> <span class="string">neofetch</span> <span class="string">tesseract-ocr</span> <span class="string">libtesseract-dev</span> <span class="string">tesseract-ocr-all</span> <span class="string">libzbar-dev</span> <span class="string">imagemagick</span> <span class="string">figlet</span> <span class="string">ffmpeg</span> <span class="string">python3-pip</span> <span class="string">redis-server</span> <span class="string">-y</span></span><br></pre></td></tr></table></figure><h2 id="把代码拉到小鸡上"><a href="#把代码拉到小鸡上" class="headerlink" title="把代码拉到小鸡上"></a>把代码拉到小鸡上</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">mkdir</span> <span class="string">/var/lib/pagermaid</span> <span class="string">&amp;&amp;</span> <span class="string">cd</span> <span class="string">/var/lib/pagermaid</span> <span class="string">&amp;&amp;</span> <span class="string">git</span> <span class="string">clone</span> <span class="string">https://github.com/xtaodada/PagerMaid-Modify.git</span></span><br></pre></td></tr></table></figure><h2 id="安装-python-的依赖"><a href="#安装-python-的依赖" class="headerlink" title="安装 python 的依赖"></a>安装 python 的依赖</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cd</span> <span class="string">PagerMaid-Modify</span> <span class="string">&amp;&amp;</span> <span class="string">pip3</span> <span class="string">install</span> <span class="string">-r</span> <span class="string">requirements.txt</span> <span class="string">&amp;&amp;</span> <span class="string">pip3</span> <span class="string">install</span> <span class="string">pyocr</span> <span class="string">dateparser</span></span><br></pre></td></tr></table></figure><h2 id="配置-bot"><a href="#配置-bot" class="headerlink" title="配置 bot"></a>配置 bot</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cp</span> <span class="string">config.gen.yml</span> <span class="string">config.yml</span></span><br><span class="line"><span class="string">sed</span> <span class="string">-i</span> <span class="string">&quot;s/ID_HERE/申请到的apiID/g&quot;</span> <span class="string">config.yml</span></span><br><span class="line"><span class="string">sed</span> <span class="string">-i</span> <span class="string">&quot;s/HASH_HERE/申请到的apiHash/g&quot;</span> <span class="string">config.yml</span></span><br></pre></td></tr></table></figure><h2 id="运行一下-bot"><a href="#运行一下-bot" class="headerlink" title="运行一下 bot"></a>运行一下 bot</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">python3</span> <span class="string">-m</span> <span class="string">pagermaid</span></span><br></pre></td></tr></table></figure><h3 id="输入注册-telegram-的手机号和验证码。开了两步验证的话还有个密码要输-······，完事后按-Ctrl-c-结束运行。"><a href="#输入注册-telegram-的手机号和验证码。开了两步验证的话还有个密码要输-······，完事后按-Ctrl-c-结束运行。" class="headerlink" title="输入注册 telegram 的手机号和验证码。开了两步验证的话还有个密码要输 ······，完事后按 Ctrl + c 结束运行。"></a>输入注册 telegram 的手机号和验证码。开了两步验证的话还有个密码要输 ······，完事后按 Ctrl + c 结束运行。</h3><h2 id="加个进程守护"><a href="#加个进程守护" class="headerlink" title="加个进程守护"></a>加个进程守护</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&gt;</span> <span class="string">/etc/systemd/system/pagermaid.service</span> <span class="string">&lt;&lt;</span> <span class="string">EOF</span></span><br><span class="line">[<span class="string">Unit</span>]</span><br><span class="line"><span class="string">Description=PagerMaid-Modify</span> <span class="string">telegram</span> <span class="string">utility</span> <span class="string">daemon</span></span><br><span class="line"><span class="string">After=network.target</span></span><br><span class="line"></span><br><span class="line">[<span class="string">Install</span>]</span><br><span class="line"><span class="string">WantedBy=multi-user.target</span></span><br><span class="line"></span><br><span class="line">[<span class="string">Service</span>]</span><br><span class="line"><span class="string">Type=simple</span></span><br><span class="line"><span class="string">WorkingDirectory=/var/lib/pagermaid/PagerMaid-Modify</span></span><br><span class="line"><span class="string">ExecStart=/usr/bin/python3</span> <span class="string">-m</span> <span class="string">pagermaid</span></span><br><span class="line"><span class="string">Restart=always</span></span><br><span class="line"></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h2 id="启动-bot"><a href="#启动-bot" class="headerlink" title="启动 bot"></a>启动 bot</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">systemctl</span> <span class="string">daemon-reload</span> <span class="string">&amp;&amp;</span> <span class="string">systemctl</span> <span class="string">start</span> <span class="string">pagermaid</span> <span class="string">&amp;&amp;</span> <span class="string">systemctl</span> <span class="string">enable</span> <span class="string">pagermaid</span></span><br></pre></td></tr></table></figure><p>好力，弄完了可以开始愉快的玩耍了</p><ul><li>感谢大佬 @xtaodada</li><li><a href="https://t.me/PagerMaid_Modify">PagerMaid-Modify</a> 的 telegram 频道</li><li><a href="https://github.com/xtaodada/PagerMaid-Modify">Github 项目地址</a></li><li><a href="https://github.com/xtaodada/PagerMaid-Modify/wiki">官方安装 wiki</a></li></ul>]]></content:encoded>
      
      <comments>lelia.club/2020/07/29/Telegram-bot(PagerMaid)/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Quantumult X 资源解析器以及正则表达式 - 无需 API 即可在本地过滤节点</title>
      <link>lelia.club/2020/07/26/quantumult-x/</link>
      <guid>lelia.club/2020/07/26/quantumult-x/</guid>
      <pubDate>Sun, 26 Jul 2020 15:30:07 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;每日一问&quot;&gt;&lt;a href=&quot;#每日一问&quot; class=&quot;headerlink&quot; title=&quot;每日一问&quot;&gt;&lt;/a&gt;每日一问&lt;/h2&gt;&lt;p&gt;还在用 API 过滤节点吗？醒醒吧，本地&lt;strong&gt;资源解析器&lt;/strong&gt;它不香吗？&lt;/p&gt;
&lt;h2
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="每日一问"><a href="#每日一问" class="headerlink" title="每日一问"></a>每日一问</h2><p>还在用 API 过滤节点吗？醒醒吧，本地<strong>资源解析器</strong>它不香吗？</p><h2 id="隐忧"><a href="#隐忧" class="headerlink" title="隐忧"></a>隐忧</h2><p>如大家所知，并不是每个人都能自建<strong>订阅转换 API</strong>，但用第三方的 API 多少会有隐私顾虑（纯粹拼人品）；</p><h2 id="资源解析器"><a href="#资源解析器" class="headerlink" title="资源解析器"></a>资源解析器</h2><p>版本 Quantumult X (v1.0.8-build253) 后，作者引入了资源解析器；相比于常见的在线 API，资源解析器的最大优势：</p><ol><li>完全本地解析，无暴露服务器风险；  </li><li>无需 URLencode 步骤，直接填入原始订阅链接即可，更可直接使用中文参数 (空格除外)；  </li><li>将各类服务器订阅解析成 Quantumult X 格式  </li><li>支持 V2RayN/SSR/SS/Trojan/QuanX/Surge/https 订阅  </li><li>超多个性化参数</li></ol><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><p><img src= "/img/loading.gif" data-lazy-src="https://limbopro.xyz/usr/uploads/2020/06/80007269.png"></p><ol><li>在 Quantumult X 配置文件中**<code>[general]</code>** 部分，加入：</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">general</span>]</span><br><span class="line"><span class="string">resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js</span></span><br></pre></td></tr></table></figure><p>2.[节点]-[引用（订阅）] 左滑任意订阅 [编辑] 或右上角 [+] 新增订阅时，选择开启 [资源解析器]；</p><p><img src= "/img/loading.gif" data-lazy-src="https://limbopro.xyz/usr/uploads/2020/06/763121157.png"></p><ol start="3"><li><p>开启 [资源解析器]；</p></li><li><p>在订阅链接后加入<strong>解析参数</strong>，如本示例中的 <code>#in=香港</code>：过滤出所有香港节点；</p></li></ol><p><img src= "/img/loading.gif" data-lazy-src="https://limbopro.xyz/usr/uploads/2020/06/2733131739.png"></p><h3 id="其他参数说明"><a href="#其他参数说明" class="headerlink" title="其他参数说明"></a>其他参数说明</h3><ul><li>注意看第 4 点；</li></ul><p>1.) 原始订阅链接后加 “#” , 不同参数用 “&amp;” 连接:<br>你的订阅地址 #in = 香港 + 台湾 &amp; emoji=1&amp;tfo=1</p><p>2.)”节点” 订阅 ➠ 参数说明:<br>info=1, 开启通知提示机场 ✈️ 流量信息（如有）;<br>emoji=1,2 或 -1, 为添加 / 删除节点名中的地区 emoji 旗帜<br>国行设备请用 emoji=2</p><p>3.)udp=1, tfo=1, tls13=1, 分别开启 udp-relay/fast-open/tls13;<br>此参数对源类型为 QuanX/Surge 的链接无效<br>cert=0, 强制 “tls-verification=false” 跳过证书验证;<br>延迟测试只有第一个数据时, 可尝试此参数</p><p>4.)<strong>in, out, 分别为 保留 / 删除 节点</strong>, 多参数用 “+” 连接 (逻辑 “或”), 逻辑 “与” 用 “.” 连接, 可直接用中文, 空格用 “%20” 代替; 如 “in = 香港. IPLC.04 + 台湾 &amp; out = 香港 %20BGP”</p><p>5.)rename 重命名、删除字段, “旧名 @新名”, “删除字段☠️”, 以及 “前缀 @”, “@后缀”, 用 “+” 连接多个参数;<br>如 “rename = 香港 @HK+[SS]@+@[1X]+ 倍率☠️”</p><p>6.)sort=1, -1, 排序参数, 分别根据节点名 正序 / 逆序 排列;</p><p>via <a href="https://github.com/KOP-XIAO/QuantumultX/blob/master/Scripts/resource-parser.js">https://github.com/KOP-XIAO/QuantumultX/blob/master/Scripts/resource-parser.js</a></p><h3 id="反馈"><a href="#反馈" class="headerlink" title="反馈"></a>反馈</h3><p>有 bug 请反馈 <a href="https://t.me/Shawn_KOP_bot">@Shawn_KOP_bot</a><br>更新请关注 tg 频道 <a href="https://t.me/QuanX_API">https://t.me/QuanX_API</a><br>Github 对应仓库 <a href="https://github.com/KOP-XIAO/QuantumultX">https://github.com/KOP-XIAO/QuantumultX</a></p><h2 id="进阶玩法"><a href="#进阶玩法" class="headerlink" title="进阶玩法"></a>进阶玩法</h2><p>节点过滤出来了？然后呢？生成策略组，届时只需在 [分流]-[引用] - 某某某 分流的 [策略偏好] 选<strong>该策略组</strong>即可；</p><h3 id="使用-as-policy-参数配合资源解析器生成策略"><a href="#使用-as-policy-参数配合资源解析器生成策略" class="headerlink" title="使用 as-policy 参数配合资源解析器生成策略"></a>使用 as-policy 参数配合资源解析器生成策略</h3><p>由于该方法不灵活，已弃用；</p><p>本高阶玩法<strong>特别适合经常观看 Netflix 的同学</strong>，因为 Netflix 的一些政策：他们在观看 Netflix 的时候需要固定使用某个地域的节点，例如<code>香港</code>，例如<code>新加坡</code>；</p><p>现在在 [server_remote] 配置项中使用 <strong>as-policy=static</strong> 参数，即可将<strong>订阅节点列表</strong>转换成<strong>策略组</strong>，例如我将<strong>某机场节点中包含新加坡的节点过滤出来</strong>并<strong>自动生成名为新加坡的策略组</strong>（名称跟随 tag），届时只需在 [分流]-[引用] - Netflix 分流的[策略偏好] 选<strong>该策略组</strong>即可；</p><p><strong>详细步骤</strong></p><p>1.[配置文件]-[编辑] 找到 [server_remote] 配置项；</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">server_remote</span>]</span><br><span class="line"></span><br><span class="line"><span class="string">你的订阅地址#in=新加坡&amp;out=专线,</span> <span class="string">tag=新加坡,</span> <span class="string">as-policy=static,</span> <span class="string">img-url=https://raw.githubusercontent.com/limbopro/Zure/master/IconSet/Netflix_Letter.png,</span> <span class="string">update-interval=86400,</span> <span class="string">opt-parser=true,</span> <span class="string">enabled=true</span></span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://limbopro.xyz/usr/uploads/2020/06/3010142252.png"></p><p><strong>[server_remote] 配置项中的 参数说明：</strong></p><p><code>as-policy=static</code>，将节点作为策略组；<br><code>img-url=</code>，设置策略组图标，后面跟图标地址；<br><code>update-interval=</code>，节点订阅更新周期；<br><code>opt-parser=</code>，是否开启资源解析器；<br><code>enabled=</code>，启用或禁用该节点订阅；</p><h3 id="使用-QuantumultX-内置-regex-参数以及正则表达式筛选节点并生成策略"><a href="#使用-QuantumultX-内置-regex-参数以及正则表达式筛选节点并生成策略" class="headerlink" title="使用 QuantumultX 内置 regex 参数以及正则表达式筛选节点并生成策略"></a>使用 QuantumultX 内置 regex 参数以及正则表达式筛选节点并生成策略</h3><p>效果与 <code>as-policy</code> 雷同，<strong>将需要的节点过滤出来并生成策略组</strong>（<strong>策略组</strong>即包含<code>节点</code>/<code>direct</code>/<code>proxy</code>/<code>reject</code>/ 等一系列其他策略的<strong>混搭嵌套组合</strong>），届时只需在 [分流]-[引用] - Netflix 分流的[策略偏好] 选<strong>该策略组</strong>即可；更友好更灵活，且支持<strong>策略组排序</strong>；</p><h4 id="详细步骤"><a href="#详细步骤" class="headerlink" title="详细步骤"></a>详细步骤</h4><p>打开 Quantumult X - [配置文件]-[编辑] ，找到 [policy] - ，参考如下写法：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">policy</span>]</span><br><span class="line"></span><br><span class="line"><span class="string">static=Netflix,</span> <span class="string">resource-tag-regex=(次元)|(MDSS),</span> <span class="string">server-tag-regex=(新加坡)|(狮城),</span> <span class="string">img-url=https://raw.githubusercontent.com/limbopro/Zure/master/IconSet/Netflix_Letter.png</span></span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong>（Quantumult X 最新版本）</p><p><code>resource-tag-regex=</code>，<code>=</code>号后面跟<strong>正则表达式</strong>，即使用正则从你所有的<strong>订阅链接的标签</strong>中筛选<strong>符合条件的订阅链接</strong>；</p><p><img src= "/img/loading.gif" data-lazy-src="https://limbopro.xyz/usr/uploads/2020/06/3598901048.png"></p><p>如需筛选多个订阅链接，可使用<code>|</code>：resource-tag-regex = 次元 | MDSS</p><p><code>server-tag-regex=</code>，<code>=</code>号后面跟<strong>正则表达式</strong>，即从上面已经筛选出来的订阅链接里再筛选出你想要的节点；</p><p><img src= "/img/loading.gif" data-lazy-src="https://limbopro.xyz/usr/uploads/2020/06/1297046818.png"></p><p>你的机场订阅肯定包含了很多很多节点，使用正则从中筛选出想要的节点；<br>如需筛选多个名称的节点，可使用<code>|</code>：server-tag-regex = 新加坡 | 香港</p><p>上述例子中，即从我所有的<strong>订阅链接</strong>中筛选出<strong>标签</strong>中含有<code>次元</code>的订阅链接，然后再从<code>次元</code>的节点中筛选出包含<code>新加坡</code>的节点；</p><p><strong>常用正则表达筛选公式：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">(A).*(B)</span>        <span class="string">节点名既有</span> <span class="string">A又有</span> <span class="string">B</span></span><br><span class="line"><span class="string">(A)|(B)</span>         <span class="string">节点名有</span> <span class="string">A</span> <span class="string">或者</span> <span class="string">B</span>  </span><br><span class="line"><span class="string">^((?!A).)*$</span>     <span class="string">节点名不含有</span> <span class="string">A</span></span><br><span class="line"><span class="string">(?!.*(A)).*(B)</span>  <span class="string">节点名不含有</span> <span class="string">A，同时含有</span> <span class="string">B</span></span><br></pre></td></tr></table></figure><p><strong>正则表达式其他语法可参考</strong>：<a href="https://www.runoob.com/regexp/regexp-syntax.html">正则表达式 - 语法</a>；<br><strong>正则表达式 30 分钟入门教程</strong>：<a href="https://deerchao.cn/tutorials/regex/regex.htm">正则表达式 30 分钟入门教程</a>；</p><p><strong>理解正则表达式：</strong>正则表达式到底是什么东西？</p><p>在编写处理字符串的程序或网页时，经常会有查找符合某些复杂规则的字符串的需要。正则表达式就是用于描述这些规则的工具。换句话说，正则表达式就是记录文本规则的代码。</p><p>很可能你使用过 Windows/Dos 下用于文件查找的通配符 (wildcard)，也就是<em>和?。如果你想查找某个目录下的所有的 Word 文档的话，你会搜索</em>.doc。在这里，* 会被解释成任意的字符串。和通配符类似，正则表达式也是用来进行文本匹配的工具，只不过比起通配符，它能更精确地描述你的需求——当然，代价就是更复杂——比如你可以编写一个正则表达式，用来查找所有以 0 开头，后面跟着 2-3 个数字，然后是一个连字号 “-”，最后是 7 或 8 位数字的字符串 (像 010-12345678 或 0376-7654321)。</p><p>via <a href="https://deerchao.cn/tutorials/regex/regex.htm">正则表达式 30 分钟入门教程</a>;</p><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p><code>img-url=</code> 后面的图标可以使用抠图仔的 github 项目：<a href="https://github.com/Koolson/Qure">https://github.com/Koolson/Qure</a>；</p><h2 id="鸣谢"><a href="#鸣谢" class="headerlink" title="鸣谢"></a>鸣谢</h2><p>感谢 Shawn <a href="https://github.com/KOP-XIAO/QuantumultX">https://github.com/KOP-XIAO/QuantumultX</a><br>感谢 抠图仔 <a href="https://github.com/Koolson/Qure">https://github.com/Koolson/Qure</a><br>感谢 Quantumult X <a href="https://t.me/QuanXApp">https://t.me/QuanXApp</a></p><hr>]]></content:encoded>
      
      <comments>lelia.club/2020/07/26/quantumult-x/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Markdown基本语法</title>
      <link>lelia.club/2020/07/22/markdown/</link>
      <guid>lelia.club/2020/07/22/markdown/</guid>
      <pubDate>Wed, 22 Jul 2020 08:59:27 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;1-基本语法&quot;&gt;&lt;a href=&quot;#1-基本语法&quot; class=&quot;headerlink&quot; title=&quot;1. 基本语法&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#1-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95&quot; title=&quot;1.
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="1-基本语法"><a href="#1-基本语法" class="headerlink" title="1. 基本语法"></a><a href="#1-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95" title="1. 基本语法"></a>1. 基本语法</h2><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a><a href="#%E4%BB%A3%E7%A0%81" title="代码"></a>代码</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">单个回车【这里有一个回车符-&gt;】</span></span><br><span class="line"><span class="string">视为空格。</span></span><br><span class="line"><span class="string">连续回车【这里有两个回车符-&gt;】</span></span><br><span class="line"></span><br><span class="line"><span class="string">视为分段。</span></span><br><span class="line"><span class="string">行尾加两个空格【这里有两个空格和一个回车符-&gt;】</span>  </span><br><span class="line"><span class="string">即可段内换行。</span></span><br><span class="line"><span class="string">*这是斜体*</span></span><br><span class="line"><span class="string">**这是粗体**</span></span><br><span class="line"><span class="string">\为转义字符</span> <span class="string">【这是一个斜杠</span> <span class="string">\\</span> <span class="string">】</span></span><br></pre></td></tr></table></figure><h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a><a href="#%E6%95%88%E6%9E%9C" title="效果"></a>效果</h3><p>单个回车【这里有一个回车符 -&gt;】<br>视为空格。<br>连续回车【这里有两个回车符 -&gt;】</p><p>视为分段。<br>行尾加两个空格【这里有两个空格和一个回车符 -&gt;】<br>即可段内换行。<br><em>这是斜体</em><br><strong>这是粗体</strong><br>\ 为转义字符【这是一个 \】</p><hr><h2 id="2-标题"><a href="#2-标题" class="headerlink" title="2. 标题"></a><a href="#2-%E6%A0%87%E9%A2%98" title="2. 标题"></a>2. 标题</h2><h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a><a href="#%E4%BB%A3%E7%A0%81-1" title="代码"></a>代码</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这是一级标题</span></span><br><span class="line"><span class="comment">## 这是二级标题</span></span><br><span class="line"><span class="comment">### 这是三级标题</span></span><br><span class="line"><span class="comment">#### 这是四级标题</span></span><br><span class="line"><span class="comment">##### 这是五级标题</span></span><br><span class="line"><span class="comment">###### 这是六级标题</span></span><br><span class="line"><span class="string">在行下面加</span> <span class="string">=</span> <span class="string">表示大标题</span></span><br><span class="line"><span class="string">在行下面加</span> <span class="bullet">-</span> <span class="string">表示小标题</span></span><br></pre></td></tr></table></figure><h3 id="效果-1"><a href="#效果-1" class="headerlink" title="效果"></a><a href="#%E6%95%88%E6%9E%9C-1" title="效果"></a>效果</h3><h2 id="这是二级标题"><a href="#这是二级标题" class="headerlink" title="这是二级标题"></a><a href="#%E8%BF%99%E6%98%AF%E4%BA%8C%E7%BA%A7%E6%A0%87%E9%A2%98" title="这是二级标题"></a>这是二级标题</h2><h3 id="这是三级标题"><a href="#这是三级标题" class="headerlink" title="这是三级标题"></a><a href="#%E8%BF%99%E6%98%AF%E4%B8%89%E7%BA%A7%E6%A0%87%E9%A2%98" title="这是三级标题"></a>这是三级标题</h3><h4 id="这是四级标题"><a href="#这是四级标题" class="headerlink" title="这是四级标题"></a><a href="#%E8%BF%99%E6%98%AF%E5%9B%9B%E7%BA%A7%E6%A0%87%E9%A2%98" title="这是四级标题"></a>这是四级标题</h4><h5 id="这是五级标题"><a href="#这是五级标题" class="headerlink" title="这是五级标题"></a><a href="#%E8%BF%99%E6%98%AF%E4%BA%94%E7%BA%A7%E6%A0%87%E9%A2%98" title="这是五级标题"></a>这是五级标题</h5><h6 id="这是六级标题"><a href="#这是六级标题" class="headerlink" title="这是六级标题"></a><a href="#%E8%BF%99%E6%98%AF%E5%85%AD%E7%BA%A7%E6%A0%87%E9%A2%98" title="这是六级标题"></a>这是六级标题</h6><h2 id="在行下面加-表示小标题"><a href="#在行下面加-表示小标题" class="headerlink" title="在行下面加 - 表示小标题"></a>在行下面加 - 表示小标题</h2><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a><a href="#%E8%AF%B4%E6%98%8E" title="说明"></a>说明</h3><p>在行首添加 1 到 6 个 # ，表示 1 到 6 级标题。 Markdown 共有 6 级标题。在文字行下面加 = 或者 - 分别表示大标题和小标题。</p><hr><h2 id="3-列表"><a href="#3-列表" class="headerlink" title="3. 列表"></a><a href="#3-%E5%88%97%E8%A1%A8" title="3. 列表"></a>3. 列表</h2><h3 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a><a href="#%E4%BB%A3%E7%A0%81-2" title="代码"></a>代码</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">无序列表项目1</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">无序列表项目2</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">无序列表项目3</span></span><br><span class="line"></span><br><span class="line"><span class="string">两个列表不能相邻，否则会认为是一个列表。</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span><span class="string">.</span> <span class="string">有序列表项目1</span></span><br><span class="line"><span class="number">2</span><span class="string">.</span> <span class="string">有序列表项目2</span></span><br><span class="line"><span class="number">3</span><span class="string">.</span> <span class="string">有序列表项目3</span></span><br><span class="line"></span><br><span class="line"><span class="string">下面是嵌套列表：</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="string">外层列表项目1</span></span><br><span class="line"><span class="string">+</span> <span class="string">内层列表项目11</span></span><br><span class="line"><span class="string">+</span> <span class="string">内层列表项目12</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">外层列表项目2</span></span><br><span class="line"><span class="string">+</span> <span class="string">内层列表项目21</span></span><br><span class="line"><span class="string">+</span> <span class="string">内层列表项目22</span></span><br></pre></td></tr></table></figure><h3 id="效果-2"><a href="#效果-2" class="headerlink" title="效果"></a><a href="#%E6%95%88%E6%9E%9C-2" title="效果"></a>效果</h3><ul><li>无序列表项目 1</li><li>无序列表项目 2</li><li>无序列表项目 3</li></ul><p>两个列表不能相邻，否则会认为是一个列表。</p><ol><li>有序列表项目 1</li><li>有序列表项目 2</li><li>有序列表项目 3</li></ol><p>下面是嵌套列表：</p><ul><li>外层列表项目 1<ul><li>内层列表项目 11</li><li>内层列表项目 12</li></ul></li><li>外层列表项目 2<ul><li>内层列表项目 21</li><li>内层列表项目 22</li></ul></li></ul><h3 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a><a href="#%E8%AF%B4%E6%98%8E-1" title="说明"></a>说明</h3><p>注意，两个列表不能相邻，否则会认为是一个列表；内层列表项目前需要有缩进。</p><hr><h2 id="4-分割线"><a href="#4-分割线" class="headerlink" title="4. 分割线"></a><a href="#4-%E5%88%86%E5%89%B2%E7%BA%BF" title="4. 分割线"></a>4. 分割线</h2><h3 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a><a href="#%E4%BB%A3%E7%A0%81-3" title="代码"></a>代码</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="string">上面是一条分割线</span></span><br></pre></td></tr></table></figure><h3 id="效果-3"><a href="#效果-3" class="headerlink" title="效果"></a><a href="#%E6%95%88%E6%9E%9C-3" title="效果"></a>效果</h3><hr><p>上面是一条分割线</p><hr><h2 id="5-程序代码"><a href="#5-程序代码" class="headerlink" title="5. 程序代码"></a><a href="#5-%E7%A8%8B%E5%BA%8F%E4%BB%A3%E7%A0%81" title="5. 程序代码"></a>5. 程序代码</h2><h3 id="代码-4"><a href="#代码-4" class="headerlink" title="代码"></a><a href="#%E4%BB%A3%E7%A0%81-4" title="代码"></a>代码</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">Java：</span></span><br><span class="line"></span><br><span class="line">    <span class="string">public</span> <span class="string">class</span> <span class="string">CodeView</span> &#123;</span><br><span class="line">        <span class="string">public</span> <span class="string">static</span> <span class="string">void</span> <span class="string">main(String</span>[] <span class="string">args)</span> &#123;</span><br><span class="line">            <span class="string">System.out.println(&quot;Hello</span> <span class="string">World!&quot;);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="效果-4"><a href="#效果-4" class="headerlink" title="效果"></a><a href="#%E6%95%88%E6%9E%9C-4" title="效果"></a>效果</h3><p>Java：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">public</span> <span class="string">class</span> <span class="string">CodeView</span> &#123;</span><br><span class="line">    <span class="string">public</span> <span class="string">static</span> <span class="string">void</span> <span class="string">main(String</span>[] <span class="string">args)</span> &#123;</span><br><span class="line">        <span class="string">System.out.println(&quot;Hello</span> <span class="string">World!&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="说明-2"><a href="#说明-2" class="headerlink" title="说明"></a><a href="#%E8%AF%B4%E6%98%8E-2" title="说明"></a>说明</h3><p>行的开头空 4 个空格或者 tab 符，表示程序代码。</p><hr><h3 id="6-引用"><a href="#6-引用" class="headerlink" title="6. 引用"></a><a href="#6-%E5%BC%95%E7%94%A8" title="6. 引用"></a>6. 引用</h3><h4 id="代码-5"><a href="#代码-5" class="headerlink" title="代码"></a><a href="#%E4%BB%A3%E7%A0%81-5" title="代码"></a>代码</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&gt;这是引用文字</span></span><br></pre></td></tr></table></figure><h4 id="效果-5"><a href="#效果-5" class="headerlink" title="效果"></a><a href="#%E6%95%88%E6%9E%9C-5" title="效果"></a>效果</h4><blockquote><p>这是引用文字</p></blockquote><hr><h2 id="7-其他"><a href="#7-其他" class="headerlink" title="7. 其他"></a><a href="#7-%E5%85%B6%E4%BB%96" title="7. 其他"></a>7. 其他</h2><h3 id="代码-6"><a href="#代码-6" class="headerlink" title="代码"></a><a href="#%E4%BB%A3%E7%A0%81-6" title="代码"></a>代码</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;http://example.com/&gt;</span></span><br><span class="line">[<span class="string">链接文字</span>]<span class="string">(http://example.com/</span> <span class="string">&quot;标题文字&quot;</span><span class="string">)</span></span><br><span class="line"><span class="type">![</span><span class="string">图片文字](/uploads/avatar.jpg</span> <span class="string">&quot;图片文字&quot;</span><span class="string">)</span></span><br></pre></td></tr></table></figure><h3 id="效果-6"><a href="#效果-6" class="headerlink" title="效果"></a><a href="#%E6%95%88%E6%9E%9C-6" title="效果"></a>效果</h3><p><a href="http://example.com/">http://example.com/</a><br><a href="http://www.ituring.com.cn/" title="标题文字">链接文字</a><br><a href="http://zhang-jc.github.io/uploads/avatar.jpg" title="图片文字">![][img-0]</a></p><p><a href="http://zhang-jc.github.io/uploads/avatar.jpg" title="图片文字">图片文字</a></p><h3 id="说明-3"><a href="#说明-3" class="headerlink" title="说明"></a><a href="#%E8%AF%B4%E6%98%8E-3" title="说明"></a>说明</h3><ul><li>直接显示链接地址，则用 &lt;&gt; 包围链接即可。</li><li>链接要显示的文字放到 [] 中。</li><li>链接地址放到 [] 后紧跟的 () 中。</li><li>要显示链接标题文字（鼠标悬浮时显示的内容）则在链接后加空格，且标题文字放到”” 中。</li><li>图片跟链接一样，只是在最前面加 ! 符号。</li></ul>]]></content:encoded>
      
      <comments>lelia.club/2020/07/22/markdown/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Debian使用第三方客户端连接SSH</title>
      <link>lelia.club/2020/07/22/Debian/</link>
      <guid>lelia.club/2020/07/22/Debian/</guid>
      <pubDate>Wed, 22 Jul 2020 08:15:29 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;一、修改ssh配置文件并设置root密码&quot;&gt;&lt;a href=&quot;#一、修改ssh配置文件并设置root密码&quot; class=&quot;headerlink&quot;
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="一、修改ssh配置文件并设置root密码"><a href="#一、修改ssh配置文件并设置root密码" class="headerlink" title="一、修改ssh配置文件并设置root密码"></a>一、修改ssh配置文件并设置root密码</h2><h3 id="1-首先使用Google-Cloud-SSH登录VPS"><a href="#1-首先使用Google-Cloud-SSH登录VPS" class="headerlink" title="1.首先使用Google Cloud SSH登录VPS"></a>1.首先使用Google Cloud SSH登录VPS</h3><p><img src= "/img/loading.gif" data-lazy-src="http://gusin.club/post-images/1595406776222.jpg"></p><h3 id="2-切换到root账户"><a href="#2-切换到root账户" class="headerlink" title="2.切换到root账户"></a>2.切换到root账户</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="http://gusin.club/post-images/1595406275924.jpg"></p><h3 id="3-编辑ssh配置文件"><a href="#3-编辑ssh配置文件" class="headerlink" title="3.编辑ssh配置文件"></a>3.编辑ssh配置文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><h3 id="4-修改以下内容即可"><a href="#4-修改以下内容即可" class="headerlink" title="4.修改以下内容即可"></a>4.修改以下内容即可</h3><p>按按键【i】进入编辑，按【Esc】退出编辑，再输入 :wq 保存并退出</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">找到</span> <span class="string">PermitRootLogin</span> <span class="literal">no</span> <span class="string">这一行，将no修改为</span> <span class="literal">yes</span></span><br><span class="line"><span class="string">找到</span> <span class="string">PasswordAuthentication</span> <span class="literal">no</span> <span class="string">这一行，将no修改为</span> <span class="literal">yes</span></span><br></pre></td></tr></table></figure><p>💊可能 PermitRootLogin 后会显示为 prohibit-password 并且#注释掉了，可将注释#去掉将 prohibit-password 换成 yes</p><h3 id="5-重启ssh"><a href="#5-重启ssh" class="headerlink" title="5.重启ssh"></a>5.重启ssh</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service sshd restart</span><br></pre></td></tr></table></figure><h3 id="6-为root账户设置密码"><a href="#6-为root账户设置密码" class="headerlink" title="6.为root账户设置密码"></a>6.为root账户设置密码</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">passwd</span></span><br></pre></td></tr></table></figure><p>输入密码-确认密码</p><h3 id="设置成功"><a href="#设置成功" class="headerlink" title="设置成功"></a>设置成功</h3><p>看到passwd: all authentication tokens updated successfully.即设置成功。</p><h2 id="🤷‍♂️-FAQ"><a href="#🤷‍♂️-FAQ" class="headerlink" title="🤷‍♂️ FAQ"></a>🤷‍♂️ FAQ</h2><h3 id="PermitRootLogin-参数"><a href="#PermitRootLogin-参数" class="headerlink" title="PermitRootLogin 参数"></a>PermitRootLogin 参数</h3><p>指定 root 是否可以用 ssh 登录。参数值必须是“yes”、“prohibit-password”、“without-password”、“orced-commands-only”或者“no”。默认值是“prohibit-password”。</p><p>如果这个选项设置为“prohibit-password”、“without-password”，通过密码和键盘交互的授权方式对 root 用户禁用。</p><p>如果这个选项设置为“orced-commands-only”，root 用户只允许通过公钥授权登录，但只是指定了 conmmand 选项的时候（这可能对远程备份是有好处的，即使 root 不允许登录）。其他授权方式对 root 无效。</p><p>如果这个选项设置为“no”，root 不允许登录。</p><p>其他参数说明，请查阅<a href="http://man.openbsd.org/sshd_config">官方文档</a>。</p>]]></content:encoded>
      
      <comments>lelia.club/2020/07/22/Debian/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Docker | 制作属于自己的 Jenkins 镜像</title>
      <link>lelia.club/2020/07/20/Docker/</link>
      <guid>lelia.club/2020/07/20/Docker/</guid>
      <pubDate>Mon, 20 Jul 2020 09:17:42 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;p&gt;有时候我们可能需要为了满足自己的需求来制作自己的 Docker 镜像。&lt;/p&gt;
&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;最近我在使用 Docker 搭建 Jenkins
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<p>有时候我们可能需要为了满足自己的需求来制作自己的 Docker 镜像。</p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近我在使用 Docker 搭建 Jenkins 自动化构建平台时遇到了各种环境问题，例如在 Jenkins 官方的镜像内是没有 maven、Android SDK、npm 等环境的，自然也就没法使用 Jenkins 来构建编译我们的项目，这里有三种解决办法：</p><h5 id="1-直接进入到-Jenkins-容器内部安装相关环境。"><a href="#1-直接进入到-Jenkins-容器内部安装相关环境。" class="headerlink" title="1. 直接进入到 Jenkins 容器内部安装相关环境。"></a>1. 直接进入到 Jenkins 容器内部安装相关环境。</h5><p>需要注意的是，安装相关相关环境后要确保容器不能被删除，容易一旦被删除，那么里面所做的变更都消失了，所以不推荐。</p><h5 id="2-在宿主机上安装相关环境，然后通过-Docker-挂载卷的形式映射到容器内部。"><a href="#2-在宿主机上安装相关环境，然后通过-Docker-挂载卷的形式映射到容器内部。" class="headerlink" title="2. 在宿主机上安装相关环境，然后通过 Docker 挂载卷的形式映射到容器内部。"></a>2. 在宿主机上安装相关环境，然后通过 Docker 挂载卷的形式映射到容器内部。</h5><p>这种方式如果宿主机有相关环境是非常方便的，可以直接环境的位置以挂载卷的形式映射到容器内部让容器能访问到宿主机的环境，但缺点也很明显，如果需要将 Jenkins 迁移到其他服务器上，那么这些环境是没法迁移的，需要到迁移的服务器上再安装一遍的，所以综上两种方式有了下面的第三种方式。</p><h5 id="3-将相关环境直接打包进-Jenkins-镜像中。"><a href="#3-将相关环境直接打包进-Jenkins-镜像中。" class="headerlink" title="3. 将相关环境直接打包进 Jenkins 镜像中。"></a>3. 将相关环境直接打包进 Jenkins 镜像中。</h5><p>这种方式需要我们在官方 Jenkins 镜像的基础上定制属于我们自己的 Jenkins 镜像，和第一种方式一样，环境是安装在容器内部的，但是不同的是容器若被删除，下次重新创建容器的时候环境都是还在的，因为环境安装在 Image 镜像内部的。所以迁移也很方便，只需要把制作好的镜像上传到 DockerHub 上，然后其他服务器需要使用的话只需要将镜像拉取下来即可。</p><h2 id="镜像制作"><a href="#镜像制作" class="headerlink" title="镜像制作"></a>镜像制作</h2><p>下面就来一步一步制作我们的 Jenkins 镜像，分别演示将 Maven、Android SDK、Node.js 环境打包到镜像中。</p><h4 id="编写-Dockerfile-文件"><a href="#编写-Dockerfile-文件" class="headerlink" title="编写 Dockerfile 文件"></a>编写 Dockerfile 文件</h4><p>首先创建我们的 Dockerfile 文件，然后编写。</p><ol><li><h5 id="选定基础镜像"><a href="#选定基础镜像" class="headerlink" title="选定基础镜像"></a>选定基础镜像</h5><p>这里我们使用 Jenkins 官方提供的 Jenkins 镜像作为基础镜像。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">FROM</span> <span class="string">jenkins/jenkins:lts</span></span><br></pre></td></tr></table></figure></li><li><h5 id="安装必要的辅助工具"><a href="#安装必要的辅助工具" class="headerlink" title="安装必要的辅助工具"></a>安装必要的辅助工具</h5><p>因为后面涉及到 zip 压缩包下载、解压操作，所以我们需要先安装 <code>curl</code>、<code>unzip</code> 命令。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RUN apt-get update \</span><br><span class="line">    &amp;&amp; echo Y | apt-get install curl \</span><br><span class="line">    &amp;&amp; apt-get install unzip</span><br></pre></td></tr></table></figure></li><li><h5 id="安装-Maven-环境"><a href="#安装-Maven-环境" class="headerlink" title="安装 Maven 环境"></a>安装 Maven 环境</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ARG MAVEN_URL=<span class="string">&quot;http://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.zip&quot;</span></span><br><span class="line">ARG USER_LOCAL=<span class="string">&quot;/usr/local&quot;</span></span><br><span class="line">ENV MAVEN_HOME=<span class="string">&quot;$USER_LOCAL/maven&quot;</span></span><br><span class="line"></span><br><span class="line">RUN cd $MAVEN_HOME \</span><br><span class="line">    &amp;&amp; curl -o maven.zip $MAVEN_URL \</span><br><span class="line">    &amp;&amp; unzip maven.zip \</span><br><span class="line">    &amp;&amp; rm maven.zip</span><br></pre></td></tr></table></figure><ul><li><code>ARG</code>：用于定义常量，仅在当前 Dockerfile 有效。</li><li><code>ENV</code>：也是定于常量，当时在构建镜像时，会作为环境变量打到镜像内部。</li><li><code>curl -o</code> ：下载文件。</li></ul></li><li><h5 id="安装-Android-SDK-环境"><a href="#安装-Android-SDK-环境" class="headerlink" title="安装 Android SDK 环境"></a>安装 Android SDK 环境</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">ARG</span> <span class="string">USER_LOCAL=&quot;/usr/local&quot;</span></span><br><span class="line"><span class="string">ARG</span> <span class="string">SDK_MANAGER_URL=&quot;https://dl.google.com/android/repository/sdk-tools-linux-4333796.zip&quot;</span></span><br><span class="line"><span class="string">ENV</span> <span class="string">ANDROID_HOME=&quot;$USER_LOCAL/Android/sdk&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">RUN</span> <span class="string">cd</span> <span class="string">$ANDROID_HOME</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">curl</span> <span class="string">-o</span> <span class="string">sdk.zip</span> <span class="string">$SDK_MANAGER_URL</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">unzip</span> <span class="string">sdk.zip</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">rm</span> <span class="string">sdk.zip</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">cd</span> <span class="string">tools</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">echo</span> <span class="string">Y</span> <span class="string">|</span> <span class="string">$ANDROID_HOME/tools/bin/sdkmanager</span> <span class="string">&quot;extras;android;m2repository&quot;</span> <span class="string">&quot;platform-tools&quot;</span> <span class="string">&quot;platforms;android-28&quot;</span> <span class="string">&quot;build-tools;28.0.3&quot;</span> <span class="string">&quot;cmake;3.10.2.4988404&quot;</span></span><br></pre></td></tr></table></figure><ul><li><code>echo Y</code>：因为有些操作需要用户输入 Y/n 确认，所以这句的意思是代替用户输入 Y。</li></ul><p>这里我们使用 Andoird 提供的命令行工具 sdkmanager 去安装 sdk，这里我们安装了 android-28、build-tools 28.0.3 版本，以及 cmake。</p><p>可以使用 <code>sdkmanager list</code> 可以查看所有可安装的环境。</p><p>详细的 sdkmanager 使用可以查看<a href="https://developer.android.com/studio/command-line/sdkmanager">官方文档</a>。</p></li><li><h5 id="安装-Node-js-环境"><a href="#安装-Node-js-环境" class="headerlink" title="安装 Node.js 环境"></a>安装 Node.js 环境</h5><p>安装 Node.js 的命令是通过 apt 来安装的，详见<a href="https://github.com/nodesource/distributions/blob/master/README.md">官方文档</a>。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">RUN</span> <span class="string">curl</span> <span class="string">-sL</span> <span class="string">https://deb.nodesource.com/setup_11.x</span> <span class="string">|</span> <span class="string">bash</span> <span class="bullet">-</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">apt-get</span> <span class="string">install</span> <span class="string">-y</span> <span class="string">nodejs</span></span><br></pre></td></tr></table></figure></li><li><h5 id="将各环境添加到系统环境变量中"><a href="#将各环境添加到系统环境变量中" class="headerlink" title="将各环境添加到系统环境变量中"></a>将各环境添加到系统环境变量中</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">ENV</span> <span class="string">PATH</span> <span class="string">$MAVEN_HOME/apache-maven-3.6.3/bin:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin:$ANDROID_HOME/platform-tools:$ANDROID_HOME/cmake/3.10.2.4988404/bin:$PATH</span></span><br></pre></td></tr></table></figure></li><li><h5 id="最后做一些清理操作"><a href="#最后做一些清理操作" class="headerlink" title="最后做一些清理操作"></a>最后做一些清理操作</h5><p>尽量在镜像中不要放一些冗余的无用文件，所以需要做一些清理操作。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">RUN</span> <span class="string">apt-get</span> <span class="string">clean</span></span><br></pre></td></tr></table></figure></li><li><h5 id="完整的-Dockerfile-文件"><a href="#完整的-Dockerfile-文件" class="headerlink" title="完整的 Dockerfile 文件"></a>完整的 Dockerfile 文件</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">FROM</span> <span class="string">jenkins/jenkins:lts</span></span><br><span class="line"><span class="string">USER</span> <span class="string">root</span></span><br><span class="line"></span><br><span class="line"><span class="string">ARG</span> <span class="string">USER_LOCAL=&quot;/usr/local&quot;</span></span><br><span class="line"><span class="string">ARG</span> <span class="string">SDK_MANAGER_URL=&quot;https://dl.google.com/android/repository/sdk-tools-linux-4333796.zip&quot;</span></span><br><span class="line"><span class="string">ARG</span> <span class="string">MAVEN_URL=&quot;http://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.zip&quot;</span></span><br><span class="line"><span class="string">ENV</span> <span class="string">ANDROID_HOME=&quot;$USER_LOCAL/Android/sdk&quot;</span></span><br><span class="line"><span class="string">ENV</span> <span class="string">MAVEN_HOME=&quot;$USER_LOCAL/maven&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">RUN</span> <span class="string">mkdir</span> <span class="string">-p</span> <span class="string">$ANDROID_HOME</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">mkdir</span> <span class="string">-p</span> <span class="string">$MAVEN_HOME</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">apt-get</span> <span class="string">update</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">echo</span> <span class="string">Y</span> <span class="string">|</span> <span class="string">apt-get</span> <span class="string">install</span> <span class="string">curl</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">apt-get</span> <span class="string">install</span> <span class="string">unzip</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">cd</span> <span class="string">$MAVEN_HOME</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">curl</span> <span class="string">-o</span> <span class="string">maven.zip</span> <span class="string">$MAVEN_URL</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">unzip</span> <span class="string">maven.zip</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">rm</span> <span class="string">maven.zip</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">cd</span> <span class="string">$ANDROID_HOME</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">curl</span> <span class="string">-o</span> <span class="string">sdk.zip</span> <span class="string">$SDK_MANAGER_URL</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">unzip</span> <span class="string">sdk.zip</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">rm</span> <span class="string">sdk.zip</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">cd</span> <span class="string">tools</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">echo</span> <span class="string">Y</span> <span class="string">|</span> <span class="string">$ANDROID_HOME/tools/bin/sdkmanager</span> <span class="string">&quot;extras;android;m2repository&quot;</span> <span class="string">&quot;platform-tools&quot;</span> <span class="string">&quot;platforms;android-28&quot;</span> <span class="string">&quot;build-tools;28.0.3&quot;</span> <span class="string">&quot;cmake;3.10.2.4988404&quot;</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">curl</span> <span class="string">-sL</span> <span class="string">https://deb.nodesource.com/setup_11.x</span> <span class="string">|</span> <span class="string">bash</span> <span class="bullet">-</span> <span class="string">\</span></span><br><span class="line">    <span class="string">&amp;&amp;</span> <span class="string">apt-get</span> <span class="string">install</span> <span class="string">-y</span> <span class="string">nodejs</span></span><br><span class="line"></span><br><span class="line"><span class="string">ENV</span> <span class="string">PATH</span> <span class="string">$MAVEN_HOME/apache-maven-3.6.3/bin:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin:$ANDROID_HOME/platform-tools:$ANDROID_HOME/cmake/3.10.2.4988404/bin:$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="string">RUN</span> <span class="string">apt-get</span> <span class="string">clean</span></span><br></pre></td></tr></table></figure><blockquote><p>Docker 镜像分层存储结构，层数是有限制的，Dockerfile 中每个命令将作为一层，所以尽量将可放在一起一些操作放在一个命令内，例如上面不必写很多 <code>RUN</code>，将命令放在一起会更好，了解更多写法可参考<a href="https://yeasy.gitbooks.io/docker_practice/image/build.html">这里</a>。</p></blockquote></li></ol><h4 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">docker</span> <span class="string">build</span> <span class="string">-t</span> <span class="string">my_jenkins</span> <span class="string">.</span></span><br></pre></td></tr></table></figure><ul><li><code>-t</code>：指定镜像名。</li></ul><blockquote><p>最后的 . 不要忘记，用于指定<a href="https://yeasy.gitbooks.io/docker_practice/image/build.html">构建上下文环境</a>，如果 Dockerfile 文件没有问题，那么构建应该是没有问题的，其中安装 Android SDK 可能需要耗时一点。</p></blockquote><h2 id="上传镜像到-DockerHub"><a href="#上传镜像到-DockerHub" class="headerlink" title="上传镜像到 DockerHub"></a>上传镜像到 DockerHub</h2><ol><li><h5 id="注册-DockerHub-账号"><a href="#注册-DockerHub-账号" class="headerlink" title="注册 DockerHub 账号"></a>注册 DockerHub 账号</h5><p>想要上传镜像到 <a href="https://hub.docker.com/">DockerHub</a> 需要提前注册一个账号。</p></li><li><h5 id="在本地登录-DockerHub-账号"><a href="#在本地登录-DockerHub-账号" class="headerlink" title="在本地登录 DockerHub 账号"></a>在本地登录 DockerHub 账号</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">docker</span> <span class="string">login</span></span><br></pre></td></tr></table></figure><p>可使用上面的命令按照提示登入你的账号</p></li><li><h5 id="推送刚刚构建的镜像"><a href="#推送刚刚构建的镜像" class="headerlink" title="推送刚刚构建的镜像"></a>推送刚刚构建的镜像</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">docker</span> <span class="string">tag</span> <span class="string">my_jenkins</span> <span class="string">imhanjie/my_jenkins</span></span><br><span class="line"><span class="string">docker</span> <span class="string">push</span> <span class="string">my_jenkins</span></span><br></pre></td></tr></table></figure><p>这里需要注意的是，在 <code>push</code> 之前，肯定是要推送到自己的仓库，所以根据镜像名称的规则，需要在镜像前面加上你自己的 DockerHub 的用户名，这样才会推送到你的仓库下，指定用户名的形式就是 <code>your_username/image_name</code> ，我的 DockerHub 名字是 <code>imhanjie</code> ，所以首先根据本地的 <code>my_jenkis</code> 镜像添加一个 tag，名称为 <code>imhanjie/my_jenkins</code> ，然后 <code>push</code> 就可以了，最后就可以在 DockerHub 上看见自己刚刚推送的镜像了。</p></li></ol><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://yeasy.gitbooks.io/docker_practice/">Docker — 从入门到实践</a></li><li><a href="https://developer.android.com/studio/command-line/sdkmanager">sdkmanager</a></li><li><a href="https://github.com/nodesource/distributions/blob/master/README.md">NodeSource Node.js Binary Distributions</a></li></ul>]]></content:encoded>
      
      <comments>lelia.club/2020/07/20/Docker/#disqus_thread</comments>
    </item>
    
    <item>
      <title>使用Telegram收发QQ消息</title>
      <link>lelia.club/2020/07/19/telegram-qq/</link>
      <guid>lelia.club/2020/07/19/telegram-qq/</guid>
      <pubDate>Sun, 19 Jul 2020 08:02:37 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;p&gt;使用&lt;a href=&quot;https://github.com/blueset/ehForwarderBot&quot;&gt;EFB&lt;/a&gt;, &lt;a href=&quot;https://github.com/blueset/efb-telegram-master&quot;&gt;ETM&lt;/a&gt;, &lt;a
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<p>使用<a href="https://github.com/blueset/ehForwarderBot">EFB</a>, <a href="https://github.com/blueset/efb-telegram-master">ETM</a>, <a href="https://github.com/blueset/efb-wechat-slave">EWS</a>和systemd守护进程，支持 Ubuntu &gt;= 18.04 &amp; Debian &gt;= 10</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><hr><p>建议先使用 <code># apt update &amp;&amp; apt upgrade -y</code>更新所有软件包</p><h2 id="二进制依赖"><a href="#二进制依赖" class="headerlink" title="二进制依赖"></a>二进制依赖</h2><p><code># apt install -y python3-pip python3-wheel ffmpeg libmagic1 libwebp6</code></p><h2 id="主体"><a href="#主体" class="headerlink" title="主体"></a>主体</h2><p><code># pip3 install ehforwarderbot efb-telegram-master efb-qq-slave</code></p><h2 id="设定"><a href="#设定" class="headerlink" title="设定"></a>设定</h2><hr><p><code># mkdir -p /etc/ehforwarderbot/profiles/qq/&#123;blueset.telegram,milkice.qq&#125;</code></p><h2 id="EFB"><a href="#EFB" class="headerlink" title="EFB"></a>EFB</h2><p>创建<code>/etc/ehforwarderbot/profiles/qq/config/yaml</code>,写入以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">master_channel: blueset.telegram</span><br><span class="line">slave_channels:</span><br><span class="line">- blueset.qq</span><br></pre></td></tr></table></figure><h2 id="ETM"><a href="#ETM" class="headerlink" title="ETM"></a>ETM</h2><p>创建 <a href="https://blog.1a23.com/2017/01/09/EFB-How-to-Send-and-Receive-Messages-from-WeChat-on-Telegram-zh-CN/#0x030-%E5%88%9B%E5%BB%BA-Telegram-Bot">Telegram Bot</a></p><h2 id="建立设定档"><a href="#建立设定档" class="headerlink" title="建立设定档"></a>建立设定档</h2><p>创建<code>/etc/ehfotwarderbot/profiles/qq/blueset/telegram/config.yaml</code>,写入以下内容</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">token: <span class="string">&quot;Token&quot;</span></span><br><span class="line"># 将 Token 替换为在上一步获得的 Token</span><br><span class="line">admins:</span><br><span class="line">- ID</span><br><span class="line"># 将 ID 替换为在上一步获得的 Telegram ID</span><br></pre></td></tr></table></figure><h2 id="EQS"><a href="#EQS" class="headerlink" title="EQS"></a>EQS</h2><p><a href="https://github.com/milkice233/efb-qq-slave/blob/master/doc/CoolQ_zh-CN.rst#%E6%96%B9%E6%A1%88%E4%BA%8C%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE---%E9%85%8D%E7%BD%AE-%E9%85%B7q-%E7%AB%AF%E7%AF%87">CoolQ Client</a></p><h2 id="主体-1"><a href="#主体-1" class="headerlink" title="主体"></a>主体</h2><p>创建<code>/etc/ehforwarderbot/profiles/qq/milkice.qq/config.yaml</code>,写入以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Client: CoolQ</span><br><span class="line">CoolQ:</span><br><span class="line">  type: HTTP</span><br><span class="line">  access_token: ac0f790e1fb74ebcaf45da77a6f9de47</span><br><span class="line">  api_root: http:<span class="comment">//127.0.0.1:5700/</span></span><br><span class="line">  host: <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">  port: <span class="number">8000</span></span><br><span class="line">  is_pro: false # 若使用 CoolQ Pro 則爲 true</span><br><span class="line">  air_option:</span><br><span class="line">    upload_to_smms: <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="systemd守护进程"><a href="#systemd守护进程" class="headerlink" title="systemd守护进程"></a>systemd守护进程</h2><p>创建<code>etc/systemd/system/efb@.service</code>,写入以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=EFB instance <span class="keyword">for</span> profile %i</span><br><span class="line">Documentation=https:<span class="comment">//github.com/blueset/ehForwarderBot</span></span><br><span class="line">Wants=network-online.target</span><br><span class="line">After=network-online.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">PrivateTmp=<span class="literal">true</span></span><br><span class="line">ExecStart=<span class="regexp">/usr/</span>bin/python3 -m ehforwarderbot -p %i</span><br><span class="line">Environment=EFB_DATA_PATH=<span class="regexp">/etc/</span>ehforwarderbot LANG=zh_CN.UTF<span class="number">-8</span></span><br><span class="line">TimeoutStopSec=<span class="number">10</span></span><br><span class="line">Restart=on-failure</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><hr><p><code># systemctl start efb@qq</code><br>设定为开机自启动: <code># systemctl enable efb@qq</code></p><h2 id="在docker上部署"><a href="#在docker上部署" class="headerlink" title="在docker上部署"></a>在docker上部署</h2><hr><p>push代码<code>$ wget https://github.com/YHNdnzj/efb-docker/raw/master/docker-compose.yml</code><br>将其中的 ehForwarderBot 替换为自己的密码，ACCOUNT 替换为QQ账号<br><code># docker-compose up -d</code><br>打开<IP>:90000,使用设定的密码登入 VNC 并登入 QQ 账号</p>]]></content:encoded>
      
      <comments>lelia.club/2020/07/19/telegram-qq/#disqus_thread</comments>
    </item>
    
    <item>
      <title>使用Telegram收发微信消息</title>
      <link>lelia.club/2020/07/19/telegram-wechat/</link>
      <guid>lelia.club/2020/07/19/telegram-wechat/</guid>
      <pubDate>Sun, 19 Jul 2020 07:25:04 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;p&gt;使用&lt;a href=&quot;https://github.com/blueset/ehForwarderBot&quot;&gt;EFB&lt;/a&gt;, &lt;a href=&quot;https://github.com/blueset/efb-telegram-master&quot;&gt;ETM&lt;/a&gt;, &lt;a
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<p>使用<a href="https://github.com/blueset/ehForwarderBot">EFB</a>, <a href="https://github.com/blueset/efb-telegram-master">ETM</a>, <a href="https://github.com/blueset/efb-wechat-slave">EWS</a>和systemd守护进程，支持 Ubuntu &gt;= 18.04 &amp; Debian &gt;= 10<br>(使用 EWS 有 微信网页版被封的危险，请谨慎使用)</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><hr><p>建议先使用 <code># apt update &amp;&amp; apt upgrade -y</code>更新所有软件包</p><h2 id="二进制依赖"><a href="#二进制依赖" class="headerlink" title="二进制依赖"></a>二进制依赖</h2><p><code># apt install -y python3-pip python3-wheel ffmpeg libmagic1 libwebp6</code></p><h2 id="主体"><a href="#主体" class="headerlink" title="主体"></a>主体</h2><p><code># pip3 install ehforwarderbot efb-telegram-master efb-wechat-slave</code></p><h2 id="设定"><a href="#设定" class="headerlink" title="设定"></a>设定</h2><hr><p><code># mkdir -p /etc/ehforwarderbot/profiles/wechat/blueset.telegram</code></p><h2 id="EFB"><a href="#EFB" class="headerlink" title="EFB"></a>EFB</h2><p>创建<code>/etc/ehforwarderbot/profiles/wechat/config.yaml</code>,写入以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">master_channel: blueset.telegram</span><br><span class="line">slave_channels:</span><br><span class="line">- blueset.wechat</span><br></pre></td></tr></table></figure><h2 id="ETM"><a href="#ETM" class="headerlink" title="ETM"></a>ETM</h2><p>创建 <a href="https://blog.1a23.com/2017/01/09/EFB-How-to-Send-and-Receive-Messages-from-WeChat-on-Telegram-zh-CN/#0x030-%E5%88%9B%E5%BB%BA-Telegram-Bot">Telegram Bot</a></p><h2 id="建立设定档"><a href="#建立设定档" class="headerlink" title="建立设定档"></a>建立设定档</h2><p>创建<code>/etc/ehforwarderbot/profiles/wechat/blueset.telegram/config.yaml</code>,写入以下内容</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">token: <span class="string">&quot;Token&quot;</span></span><br><span class="line"># 将 Token 替换为在上一步获得的 Token</span><br><span class="line">admins:</span><br><span class="line">- ID</span><br><span class="line"># 将 ID 替换为在上一步获得的 Telegram ID</span><br></pre></td></tr></table></figure><h2 id="systemd-守护进程"><a href="#systemd-守护进程" class="headerlink" title="systemd 守护进程"></a>systemd 守护进程</h2><p>创建 <code>/etc/systemd/system/efb@.service</code>,写入以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=EFB instance <span class="keyword">for</span> profile %i</span><br><span class="line">Documentation=https:<span class="comment">//github.com/blueset/ehForwarderBot</span></span><br><span class="line">Wants=network-online.target</span><br><span class="line">After=network-online.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">PrivateTmp=<span class="literal">true</span></span><br><span class="line">ExecStart=<span class="regexp">/usr/</span>bin/python3 -m ehforwarderbot -p %i</span><br><span class="line">Environment=EFB_DATA_PATH=<span class="regexp">/etc/</span>ehforwarderbot LANG=zh_CN.UTF<span class="number">-8</span></span><br><span class="line">TimeoutStopSec=<span class="number">10</span></span><br><span class="line">Restart=on-failure</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><hr><p><code>#systemctl start efb@wechat</code><br>使用<code>$ journalctl -u efb@wechat -e</code>查看输出，扫码登录<br>设定为开机自启动：<code># systemctl enable efb@wechat</code></p><h2 id="使用docker部署"><a href="#使用docker部署" class="headerlink" title="使用docker部署"></a>使用docker部署</h2><hr><p>push代码   <code># curl -fsSL https://github.com/YHNdnzj/efb-docker/raw/master/init.sh | bash</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># docker run -d -e EFB_PROFILE=wechat --name efb-wechat -v /etc/ehforwarderbot:/etc/ehforwarderbot yhndnzj/efb</span><br><span class="line"></span><br><span class="line"># docker logs -f efb-wechat</span><br></pre></td></tr></table></figure><h2 id="Debian-Docker-安装"><a href="#Debian-Docker-安装" class="headerlink" title="Debian Docker 安装"></a>Debian Docker 安装</h2><h3 id="使用官方安装脚本自动安装"><a href="#使用官方安装脚本自动安装" class="headerlink" title="使用官方安装脚本自动安装"></a>使用官方安装脚本自动安装</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https:<span class="comment">//get.docker.com | bash -s docker --mirror Aliyun</span></span><br></pre></td></tr></table></figure><h3 id="也可以使用国内-daocloud-一键安装命令："><a href="#也可以使用国内-daocloud-一键安装命令：" class="headerlink" title="也可以使用国内 daocloud 一键安装命令："></a>也可以使用国内 daocloud 一键安装命令：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https:<span class="comment">//get.daocloud.io/docker | sh</span></span><br></pre></td></tr></table></figure><h2 id="docker-compase"><a href="#docker-compase" class="headerlink" title="docker-compase"></a>docker-compase</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L <span class="string">&quot;https://github.com/docker/compose/releases/download/1.26.0/docker-compose-$(uname -s)-$(uname -m)&quot;</span> -o /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>lelia.club/2020/07/19/telegram-wechat/#disqus_thread</comments>
    </item>
    
    <item>
      <title>小白编写签到脚本</title>
      <link>lelia.club/2020/07/16/check/</link>
      <guid>lelia.club/2020/07/16/check/</guid>
      <pubDate>Thu, 16 Jul 2020 06:19:44 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;关于如何自己编写签到脚本&quot;&gt;&lt;a href=&quot;#关于如何自己编写签到脚本&quot; class=&quot;headerlink&quot; title=&quot;关于如何自己编写签到脚本&quot;&gt;&lt;/a&gt;关于如何自己编写签到脚本&lt;/h2&gt;&lt;h2 id=&quot;GET方法篇-豆瓣时间为例子&quot;&gt;&lt;a
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="关于如何自己编写签到脚本"><a href="#关于如何自己编写签到脚本" class="headerlink" title="关于如何自己编写签到脚本"></a>关于如何自己编写签到脚本</h2><h2 id="GET方法篇-豆瓣时间为例子"><a href="#GET方法篇-豆瓣时间为例子" class="headerlink" title="GET方法篇(豆瓣时间为例子)"></a>GET方法篇(豆瓣时间为例子)</h2><h2 id="第一步-对我们要实现自动签到的App抓包"><a href="#第一步-对我们要实现自动签到的App抓包" class="headerlink" title="第一步,对我们要实现自动签到的App抓包"></a>第一步,对我们要实现自动签到的App抓包</h2><p>推荐使用Thor进行抓包和数据分析,没有的话也可以使用Qx or Surge<br>大致的抓包流程如下<br><img src= "/img/loading.gif" data-lazy-src="http://gusin.club/post-images/1594955066280.gif" alt="图片描述-w150"><br>删除未完成的请求以及一些图片,有一条check_in的记录映入你的眼帘,你二话不说就点进去看看这条记录,查看了她的消息体(你就是馋她的身子), 你拿出了多年学习英语的经验,知道Good Good Study,Day Day Up的真理, 一眼看去<code> &quot;has_checked&quot;:true&amp;&quot;auto_check&quot;:&#123;&quot;status&quot;:&quot;success&quot;&#125;</code>,你知道这个脚本有戏了。</p><p>然后放进Anubis这个神奇的App进行重放操作,你知道胜败就在此一举,接下来的脚本能否实现就靠它了-&gt;重放</p><p>于是乎,你查看了重放的结果,果然不出所料。</p><p>1、能够返回数据<br>2、返回数据几乎与手动签到一致,除了部分参数变成了false或者其他<br>3、可以说找到关键的记录是非常的重要的操作<br><img src= "/img/loading.gif" data-lazy-src="http://gusin.club/post-images/1594955104642.gif"></p><p>备注:建议无任何基础者先抓包,找出签到记录(一般记录都会有自己的标识,像上面的这种就比较容易发现)</p><p>然后第二天对记录进行重放操作,如果返回的消息体与手动签到近似度达到95%,则可进行下面的操作！</p><h2 id="第二步-对抓包数据进行分析"><a href="#第二步-对抓包数据进行分析" class="headerlink" title="第二步,对抓包数据进行分析"></a>第二步,对抓包数据进行分析</h2><h3 id="response的数据"><a href="#response的数据" class="headerlink" title="response的数据"></a>response的数据</h3><p><img src= "/img/loading.gif" data-lazy-src="http://gusin.club/post-images/1594952892883.png"><br>可以看到对我们有用的数据在上方已经说明 has_checked&amp;status</p><p>然后再仔细看看可以看到”continuous_check_in_count”: 1,意味着连续签到天数</p><p>在下面的脚本编写的过程中会重点用到这几个数据</p><h3 id="request的数据"><a href="#request的数据" class="headerlink" title="request的数据"></a>request的数据</h3><p><img src= "/img/loading.gif" data-lazy-src="http://gusin.club/post-images/1594952945007.png"></p><p>其中的 host:frodo.douban.com 这个是我们要添加到 MiTM中的主机名</p><p>而链接https://……?在?之前我们是需要将其改写然后添加到复写的(至于为什么是？之前,建议百度 GET和POST请求方式)</p><p>上面的复写就是^https://fro.douban.com/api/v2/niffler/check_in/status</p><p>可以看和原来的<a href="https://fro.douban/com/api/v2/niffler/check_in/status%E5%8C%BA%E5%88%AB%E6%89%80%E5%9C%A8(%E8%BF%99%E9%87%8C%E6%B6%89%E5%8F%8A%E5%88%B0%E6%AD%A3%E5%88%99%E8%AF%AD%E6%B3%95),%E4%BD%86%E6%98%AF%E4%BD%A0%E4%BE%9D%E7%84%B6%E5%8F%AF%E4%BB%A5%E4%B8%8D%E7%94%A8%E7%AE%A1,%E5%A5%97%E6%A8%A1%E7%89%88%E7%94%BB%E8%91%AB%E8%8A%A6%E3%80%82">https://fro.douban\com/api/v2/niffler/check_in/status区别所在(这里涉及到正则语法),但是你依然可以不用管,套模版画葫芦。</a></p><p>所以我们最终就可以得到以下一份复写配置指南：</p><p>[MiTM]</p><p>frodo.douban.com</p><p>[rewrite_local] Qx</p><p>^<a href="https://fro.douban.com/api/v2/niffler/check_in/status">https://fro.douban.com/api/v2/niffler/check_in/status</a> url script-request-header dbsj.cookie.js</p><p>[rewrite_local] Surge</p><p>http-request ^<a href="https://fro.douban.com/api/v2/niffler/check_in/status">https://fro.douban.com/api/v2/niffler/check_in/status</a> script-path=dbsj.cookie.js</p><h2 id="第三步-编写Cookie脚本"><a href="#第三步-编写Cookie脚本" class="headerlink" title="第三步,编写Cookie脚本"></a>第三步,编写Cookie脚本</h2><h3 id="3-1-首先从GitHub上下载-chavyleung库中的脚本-这里用-全民K歌的"><a href="#3-1-首先从GitHub上下载-chavyleung库中的脚本-这里用-全民K歌的" class="headerlink" title="3.1 首先从GitHub上下载@chavyleung库中的脚本(这里用 全民K歌的)"></a>3.1 首先从GitHub上下载<a href="https://github.com/chavyleung/scripts">@chavyleung</a>库中的脚本(这里用 全民K歌的)</h3><p><img src= "/img/loading.gif" data-lazy-src="http://gusin.club/post-images/1594953097061.png"></p><p>我们下载了这三个文件到电脑或者你的手机中,打开将init方法上的名字(全民K歌,qmkg)改掉。</p><p>README.md这个文件我们可以暂时不用管<br><img src= "/img/loading.gif" data-lazy-src="http://gusin.club/post-images/1594953132206.png"></p><p>请看下方注释文本,GET方法我们只需要 url和header</p><p><img src= "/img/loading.gif" data-lazy-src="http://gusin.club/post-images/1594953160792.png"></p><p>激动人心的时候到了,是时候表演真正的技术了,我们将写好的dbsj.cookie.js(注意这里需要改一下文件名)放到本地进行测试,添加MITM&amp;rewrite</p><h2 id="第四步-开启测试"><a href="#第四步-开启测试" class="headerlink" title="第四步,开启测试"></a>第四步,开启测试</h2><p>我们打开Anubis,选中我们刚刚重放的记录,再次对其进行重放操作(相当于模拟手动签到)</p><ul><li>成功:那么你会收到Qx或者Surge的获取Cookie成功的通知</li><li>失败:你不会收到任何通知(<ul><li>这里可能有几种失败的原因,你的复写不正确,你没有进行配置,或者你没有开关软件<h2 id="第五步-编写签到脚本"><a href="#第五步-编写签到脚本" class="headerlink" title="第五步,编写签到脚本"></a>第五步,编写签到脚本</h2>在上一步中,我们已经将init()方法上的参数修改了,这里不再赘述</li></ul></li></ul><p>继续看图中的注释内容<br><img src= "/img/loading.gif" data-lazy-src="http://gusin.club/post-images/1594953268558.png"><br>我们将返回的数据给了result,此时result就相当于我们手动签到和重放返回的消息体中的数据,参考第二步response的数据。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"> &#x2F;&#x2F;这里意味在全名K歌中我们要获取的数据,我们需要对其进行改写</span><br><span class="line">const total &#x3D; result.data[&#39;task.revisionSignInGetAward&#39;].total</span><br><span class="line">const ret &#x3D; result.data[&#39;task.revisionSignInGetAward&#39;].ret</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;在豆瓣时间我们确定了对我们有用的数据是 has_checked、continuous_check_in_count以及status</span><br><span class="line">&#x2F;&#x2F;具体参数的意义可以从英文释义了解到     今日是否签到      连续签到天数           自动签到结果</span><br><span class="line">&#x2F;&#x2F;那么我们就用这三个判断               重复签到                             签到成功还是失败</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;下面我们来获取数据,result在第一个&#123;&#125;,而我们要获取has_checked就要 result.today_status进入到第二个&#123;&#125;</span><br><span class="line">&#x2F;&#x2F;然后再result.today_status.has_checked获取到我们想要的数据并赋给 has_checked</span><br><span class="line">const has_checked &#x3D; result.today_status.has_checked</span><br><span class="line">&#x2F;&#x2F;对于连续签到天数,我们这里也加上作为演示</span><br><span class="line">const continuous_check_in_count &#x3D; result.continuous_check_in_count</span><br><span class="line">const status &#x3D; result.auto_check.status</span><br><span class="line">&#x2F;&#x2F;然后我们要开始对我们取到的数据进行判断了</span><br><span class="line">if (status &#x3D;&#x3D; &quot;success&quot;) &#123;</span><br><span class="line">  &#x2F;&#x2F;等于true是因为手动签到的时候 “status”: &quot;success&quot; 你要根据你要编写的脚本具体变化</span><br><span class="line">  &#x2F;&#x2F;举个例子, 在某个脚本中关键的地方是 “checked”: 200   那么你就要判断 chencked &#x3D;&#x3D; 200</span><br><span class="line">  subTitle &#x3D; &#96;签到结果: 成功&#96; &#x2F;&#x2F;这里我们不改动</span><br><span class="line">  &#x2F;&#x2F;对于连续签到天数,我们放在detail中,那么就需要这样写了</span><br><span class="line">  &#x2F;&#x2F;只需要将获取到的数据放在   $&#123;&#125; 当中的大括号即可</span><br><span class="line">  detail &#x3D; &#96;连续签到天数$&#123;continuous_check_in_count&#125;&#96;</span><br><span class="line">&#125; else if(has_checked &#x3D;&#x3D; true) &#123;</span><br><span class="line">  &#x2F;&#x2F;重放(再次签到)返回的结果是 true 所以我们判定他是重复签到</span><br><span class="line">  subTitle &#x3D; &#96;签到结果: 重复&#96;</span><br><span class="line">&#125; else if(has_checked &#x3D;&#x3D; false)&#123;</span><br><span class="line">  &#x2F;&#x2F;这一个判断你可加可不加</span><br><span class="line">  subTitle &#x3D; &#96;签到结果: 失败&#96;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;软件的通知方法</span><br><span class="line">senku.msg(cookieName, subTitle, detail)</span><br><span class="line">senku.done()</span><br></pre></td></tr></table></figure><p>对于小白我们就判断 if 和 else if 成功或者重复的情况,找到关键字例如status对其判断就好</p><p>当然如果你知道那个参数数据是失败的话 那么你就可以用 else if(xxx == xx){subTitle = 签到失败}</p><p>最终我们得到这么一份脚本,init()方法我们不做任何改动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">const cookieName &#x3D; &#39;豆瓣时间&#39;</span><br><span class="line">const signurlKey &#x3D; &#39;senku_signurl_dbsj&#39;</span><br><span class="line">const signheaderKey &#x3D; &#39;senku_signheader_dbsj&#39;</span><br><span class="line">const signbodyKey &#x3D; &#39;senku_signbody_dbsj&#39;</span><br><span class="line">const senku &#x3D; init()</span><br><span class="line">const signurlVal &#x3D; senku.getdata(signurlKey)</span><br><span class="line">const signheaderVal &#x3D; senku.getdata(signheaderKey)</span><br><span class="line">sign()</span><br><span class="line">function sign() &#123;</span><br><span class="line">  const url &#x3D; &#123; url: signurlVal, headers: JSON.parse(signheaderVal)&#125;</span><br><span class="line">  senku.get(url, (error, response, data) &#x3D;&gt; &#123;</span><br><span class="line">    const result &#x3D; JSON.parse(data)</span><br><span class="line">    let subTitle &#x3D; &#96;&#96;</span><br><span class="line">    let detail &#x3D; &#96;&#96;</span><br><span class="line">    const status &#x3D; result.auto_check.status</span><br><span class="line">    const has_checked &#x3D; result.today_status.has_checked</span><br><span class="line">    const continuous_check_in_count &#x3D; result.continuous_check_in_count</span><br><span class="line">    if (status &#x3D;&#x3D; &quot;success&quot;) &#123;</span><br><span class="line">      subTitle &#x3D; &#96;签到结果: 成功&#96;</span><br><span class="line">      detail &#x3D; &#96;连续签到天数$&#123;continuous_check_in_count&#125;&#96;</span><br><span class="line">    &#125; else if (has_checked &#x3D;&#x3D; true) &#123;</span><br><span class="line">      subTitle &#x3D; &#96;签到结果: 重复&#96;</span><br><span class="line">    &#125;</span><br><span class="line">    else if (has_checked &#x3D;&#x3D; false) &#123;</span><br><span class="line">      subTitle &#x3D; &#96;签到结果: 失败&#96;</span><br><span class="line">    &#125;</span><br><span class="line">    senku.msg(cookieName, subTitle, detail)</span><br><span class="line">    senku.done()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们将脚本放在本地,添加task,然后对其进行手动只需一次,不出意外的话,你会收到软件的通知</p><p>[task_local]</p><p>1 0 * * * dbsj.js</p><h3 id="以上-大概就是我日常用-chavyleung造好的轮子写出来的脚本"><a href="#以上-大概就是我日常用-chavyleung造好的轮子写出来的脚本" class="headerlink" title="以上,大概就是我日常用@chavyleung造好的轮子写出来的脚本"></a>以上,大概就是我日常用<a href="https://github.com/chavyleung/scripts">@chavyleung</a>造好的轮子写出来的脚本</h3><h3 id="同时也欢迎大家自己动手编写-实现仓库的万物皆可签到"><a href="#同时也欢迎大家自己动手编写-实现仓库的万物皆可签到" class="headerlink" title="同时也欢迎大家自己动手编写,实现仓库的万物皆可签到"></a>同时也欢迎大家自己动手编写,实现仓库的万物皆可签到</h3>]]></content:encoded>
      
      <comments>lelia.club/2020/07/16/check/#disqus_thread</comments>
    </item>
    
    <item>
      <title>幕布高级版兑换码无限兑换</title>
      <link>lelia.club/2020/07/15/mu-bu/</link>
      <guid>lelia.club/2020/07/15/mu-bu/</guid>
      <pubDate>Wed, 15 Jul 2020 03:00:40 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;进入幕布官网地址&quot;&gt;&lt;a href=&quot;#进入幕布官网地址&quot; class=&quot;headerlink&quot; title=&quot;进入幕布官网地址&quot;&gt;&lt;/a&gt;进入幕布官网地址&lt;/h2&gt;&lt;p&gt;&lt;a
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="进入幕布官网地址"><a href="#进入幕布官网地址" class="headerlink" title="进入幕布官网地址"></a>进入幕布官网地址</h2><p><a href="https://mubu.com/apps">https://mubu.com/apps</a></p><h2 id="点击续费→使用升级码→随便复制一个-领一个月，然后重复操作"><a href="#点击续费→使用升级码→随便复制一个-领一个月，然后重复操作" class="headerlink" title="点击续费→使用升级码→随便复制一个 领一个月，然后重复操作"></a>点击续费→使用升级码→随便复制一个 领一个月，然后重复操作</h2><h2 id="升级码"><a href="#升级码" class="headerlink" title="升级码"></a>升级码</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1357</span><span class="number">-3192</span><span class="number">-0691</span><span class="number">-2172</span></span><br><span class="line"><span class="number">1574</span><span class="number">-2480</span><span class="number">-0697</span><span class="number">-2758</span></span><br><span class="line"><span class="number">2655</span><span class="number">-6873</span><span class="number">-0544</span><span class="number">-4357</span></span><br><span class="line"><span class="number">2668</span><span class="number">-3983</span><span class="number">-0634</span><span class="number">-8640</span></span><br><span class="line"><span class="number">3018</span><span class="number">-3365</span><span class="number">-0406</span><span class="number">-7069</span></span><br><span class="line"><span class="number">3305</span><span class="number">-7677</span><span class="number">-0649</span><span class="number">-5236</span></span><br><span class="line"><span class="number">5445</span><span class="number">-3804</span><span class="number">-0643</span><span class="number">-5009</span></span><br><span class="line"><span class="number">5546</span><span class="number">-5107</span><span class="number">-0246</span><span class="number">-4145</span></span><br><span class="line"><span class="number">6435</span><span class="number">-7684</span><span class="number">-0945</span><span class="number">-7952</span></span><br><span class="line"><span class="number">6828</span><span class="number">-5611</span><span class="number">-0174</span><span class="number">-5278</span></span><br><span class="line"><span class="number">6853</span><span class="number">-8233</span><span class="number">-0422</span><span class="number">-8588</span></span><br><span class="line"><span class="number">7191</span><span class="number">-5622</span><span class="number">-0728</span><span class="number">-8647</span></span><br><span class="line"><span class="number">9349</span><span class="number">-8930</span><span class="number">-0749</span><span class="number">-1774</span></span><br><span class="line"><span class="number">9642</span><span class="number">-9716</span><span class="number">-0768</span><span class="number">-8881</span></span><br><span class="line"><span class="number">9878</span><span class="number">-8560</span><span class="number">-0725</span><span class="number">-1240</span></span><br><span class="line"><span class="number">7434</span><span class="number">-4489</span><span class="number">-0365</span><span class="number">-1171</span></span><br></pre></td></tr></table></figure><h2 id="或者谷歌浏览器官网网站登录F12打开控制台，输入以下代码后回车，自动刷最后一个1000数字改为你想要刷多少个月。"><a href="#或者谷歌浏览器官网网站登录F12打开控制台，输入以下代码后回车，自动刷最后一个1000数字改为你想要刷多少个月。" class="headerlink" title="或者谷歌浏览器官网网站登录F12打开控制台，输入以下代码后回车，自动刷最后一个1000数字改为你想要刷多少个月。"></a>或者谷歌浏览器官网网站登录F12打开控制台，输入以下代码后回车，自动刷最后一个1000数字改为你想要刷多少个月。</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mubu</span>(<span class="params"></span>)</span>&#123;<span class="keyword">let</span> formdata=<span class="keyword">new</span> FormData();formdata.append(<span class="string">&#x27;code&#x27;</span>,<span class="string">&quot;9642-9716-0768-8881&quot;</span>)</span><br><span class="line">fetch(<span class="string">&quot;https://mubu.com/api/upgrade/use_code&quot;</span>,&#123;<span class="attr">method</span>:<span class="string">&quot;POST&quot;</span>,<span class="attr">body</span>:formdata&#125;).then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;<span class="built_in">console</span>.log(<span class="string">&#x27;续费成功&#x27;</span>)&#125;,<span class="function"><span class="params">err</span>=&gt;</span>&#123;<span class="built_in">console</span>.log(err)&#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;<span class="built_in">console</span>.log(err)&#125;)&#125;</span><br><span class="line"><span class="built_in">setInterval</span>(mubu,<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>lelia.club/2020/07/15/mu-bu/#disqus_thread</comments>
    </item>
    
    <item>
      <title>《计算机是怎么跑起来的》</title>
      <link>lelia.club/2020/07/15/computer/</link>
      <guid>lelia.club/2020/07/15/computer/</guid>
      <pubDate>Wed, 15 Jul 2020 02:49:02 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;读后感&quot;&gt;&lt;a href=&quot;#读后感&quot; class=&quot;headerlink&quot;
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="读后感"><a href="#读后感" class="headerlink" title="读后感"></a>读后感</h2>]]></content:encoded>
      
      <comments>lelia.club/2020/07/15/computer/#disqus_thread</comments>
    </item>
    
    <item>
      <title>AE表达式学习</title>
      <link>lelia.club/2020/07/15/AE/</link>
      <guid>lelia.club/2020/07/15/AE/</guid>
      <pubDate>Wed, 15 Jul 2020 02:10:21 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;什么是表达式？&quot;&gt;&lt;a href=&quot;#什么是表达式？&quot; class=&quot;headerlink&quot; title=&quot;什么是表达式？&quot;&gt;&lt;/a&gt;什么是表达式？&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;表达式的本质是通过 &lt;code&gt;设定的条件，计算出的值&lt;/code&gt;
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="什么是表达式？"><a href="#什么是表达式？" class="headerlink" title="什么是表达式？"></a>什么是表达式？</h2><hr><p>表达式的本质是通过 <code>设定的条件，计算出的值</code> 。<br>即表达式的条件是自己设定的，写的表达式就是为了设定条件，而最终得到的就是一个 <strong>值</strong><br>值就是操作的所有对象都是通过赋值让它形成我们想要的结果。</p><h2 id="如何使用表达式？"><a href="#如何使用表达式？" class="headerlink" title="如何使用表达式？"></a>如何使用表达式？</h2><hr><h3 id="使用方法及工具"><a href="#使用方法及工具" class="headerlink" title="使用方法及工具"></a>使用方法及工具</h3><ul><li>表达式实际上是要给到某一个具体的合成及某一属性</li><li>对一个属性使用表达式时按住键盘 <code>Alt+鼠标左键 </code> 点击时钟按钮即可激活，此时表达式属性的值变为红色，右边弹出表达式输入的窗口。<img src= "/img/loading.gif" data-lazy-src="http://gusin.club/post-images/1596096114664.jpg"></li><li>对于表达式输入框，可以自定义JS表达式<br><img src= "/img/loading.gif" data-lazy-src="http://gusin.club/post-images/1596097702192.png"><br>1: “=” 表达式生效开关<br>2: 以曲线的方式看表达式（需结合图表编辑器按钮）<br>3: 橡皮筋按钮 使用它可以和其他属性形成关系<br>4: 表达式菜单</li><li><strong>写表达式就是在写关系，不使用表达式时它是一个固定的值，即表达式是一个动态的值-动态地和某个东西有一定的关系</strong><ul><li>如何形成关系？橡皮筋功能就可以形成关系</li><li>可以是某个层的属性和其他属性形成关系，这个属性既可以是其他层，也可以是自己层</li><li>例如：将自己层的透明度、旋转和文本内容的表达式同时激活，文本内容的橡皮筋指向旋转层，旋转层的橡皮筋指向透明度层。此时在透明度表达式的输入框输入值，以上三者将同时变化</li><li>如何成立？</li></ul></li></ul>]]></content:encoded>
      
      <comments>lelia.club/2020/07/15/AE/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Gridea配置GitHub Page</title>
      <link>lelia.club/2020/07/14/gridea-github-page/</link>
      <guid>lelia.club/2020/07/14/gridea-github-page/</guid>
      <pubDate>Tue, 14 Jul 2020 06:59:06 GMT</pubDate>
      <description>
      
        
        
          
          
            &lt;h2 id=&quot;Create-a-new-repository-创建仓库&quot;&gt;&lt;a href=&quot;#Create-a-new-repository-创建仓库&quot; class=&quot;headerlink&quot; title=&quot;Create a new repository
          
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="Create-a-new-repository-创建仓库"><a href="#Create-a-new-repository-创建仓库" class="headerlink" title="Create a new repository 创建仓库"></a>Create a new repository 创建仓库</h2><ol><li>Repository name切记要按照正确的格式输入：<font color="red" size=3 face="宋体"><strong>用户名.github.io</strong></font></li><li>勾选为public公开仓库，勾选Initialize this repository with a README</li><li>勾选create repository<br>此时仓库项目已创建成功<h2 id="设置项目为-GitHub-Page"><a href="#设置项目为-GitHub-Page" class="headerlink" title="设置项目为 GitHub Page"></a>设置项目为 GitHub Page</h2></li><li>点击setting</li><li>将页面滑倒 Github Page处</li><li>在source下将None按钮切换为 master branch</li><li>此时，会出现一串地址 https://你的用户名.github.io 点击访问会出现 README 中描述文字<br>此时GitHub Page创建成功<h2 id="申请-GitHub-Token"><a href="#申请-GitHub-Token" class="headerlink" title="申请 GitHub Token"></a>申请 GitHub Token</h2></li><li>点击右上角个人头像，点击Settings</li><li>找到左边选项栏中最后一栏 Developer settings 进入</li><li>点击 Personal access tokens - Generate new token 开始创建Token</li><li>Note 描述随意填写，第一栏的 repo 勾选后移至页面最底部，点击 Generate token 成功创建</li><li>将生成的 GitHub token 备份，此时的 token 仅会出现一次<h2 id="配置Gridea"><a href="#配置Gridea" class="headerlink" title="配置Gridea"></a>配置Gridea</h2></li><li>进入 Gridea 点击远程-基础配置</li><li>平台选择 GitHub Page</li><li>按照预先设定好的参数进行填写<h2 id="自定义域名"><a href="#自定义域名" class="headerlink" title="自定义域名"></a>自定义域名</h2></li><li>在域名供应商中增加4条DNS设定，类型指向A记录，内容分别为<br> 185.199.108.153<br> 185.199.109.153<br> 185.199.110.153<br> 185.199.111.153</li><li>返回 Gridea 中将域名栏和 CNAME 填写为自己的域名</li><li>点击检测远程连接 - 同步</li><li>配置完成<h2 id="🤷‍♂️-FAQ"><a href="#🤷‍♂️-FAQ" class="headerlink" title="🤷‍♂️ FAQ"></a>🤷‍♂️ FAQ</h2>网页样式显示异常怎么办？<br>这是由于域名设置的时候所选 https 或 http 错误（自定义域名且无证书时填 http），添加后保存，重新同步一下就好了</li></ol>]]></content:encoded>
      
      <comments>lelia.club/2020/07/14/gridea-github-page/#disqus_thread</comments>
    </item>
    
  </channel>
</rss>
